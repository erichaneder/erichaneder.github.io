"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[535],{2485:function(e,r,s){s.r(r),s.d(r,{default:function(){return Z}});var o=s(3396);const a={class:"login"};function t(e,r,s,t,n,i){const l=(0,o.up)("Login");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(l)])}var n=s(9242),i=s(7139);const l={class:"min-h-screen flex flex-col items-center px-5"},u={class:"w-96 bg-white p-8 rounded shadow mt-20"},m=(0,o._)("div",{class:"h-0.5 bg-gray-200 w-36 mx-auto mt-2.5 mb-4"},null,-1),d={class:"mb-4"},c=(0,o._)("label",{for:"username",class:"block text-sm mb-1"},"Username / Email:",-1),p={key:0,class:"text-red-500"},f={class:"mb-6"},g=(0,o._)("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1),h={key:0,class:"text-red-500"};function w(e,r,s,a,t,w){const b=(0,o.up)("NormalHeading"),v=(0,o.up)("CustomButton"),y=(0,o.up)("ErrorModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[(0,o._)("div",u,[(0,o.Wm)(b,{text:"Login"}),m,(0,o._)("form",{onSubmit:r[4]||(r[4]=(0,n.iM)(((...e)=>w.submit&&w.submit(...e)),["prevent"]))},[(0,o._)("div",d,[c,(0,o.wy)((0,o._)("input",{type:"text",id:"username",class:"w-full h-10 px-2 border rounded","onUpdate:modelValue":r[0]||(r[0]=e=>t.form.values.username=e),onBlur:r[1]||(r[1]=e=>w.validate("username"))},null,544),[[n.nr,t.form.values.username]]),t.form.errors.username?((0,o.wg)(),(0,o.iD)("p",p,(0,i.zw)(t.form.errors.username),1)):(0,o.kq)("",!0)]),(0,o._)("div",f,[g,(0,o.wy)((0,o._)("input",{type:"password",id:"password",class:"w-full h-10 px-2 border rounded","onUpdate:modelValue":r[2]||(r[2]=e=>t.form.values.password=e),onBlur:r[3]||(r[3]=e=>w.validate("password"))},null,544),[[n.nr,t.form.values.password]]),t.form.errors.password?((0,o.wg)(),(0,o.iD)("p",h,(0,i.zw)(t.form.errors.password),1)):(0,o.kq)("",!0)]),(0,o.Wm)(v,{type:"submit",CustomButtonStyle:"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,o.w5)((()=>[(0,o.Uk)("Login")])),_:1})],32)])]),(0,o.Wm)(y,{isVisible:t.isErrorModalVisible,errorMessage:t.errorMessage,"onUpdate:isVisible":r[5]||(r[5]=e=>t.isErrorModalVisible=e)},null,8,["isVisible","errorMessage"])],64)}s(7658);var b=s(9427),v=s(2260),y=s(432),k=s(7629),E=s(4460);const M=(0,k.Ry)().shape({username:(0,k.Z_)().required("Please enter your Username or Email!"),password:(0,k.Z_)().required("Please enter your password!")});var x={name:"LoginComponent",components:{NormalHeading:v.Z,ErrorModal:y.Z,CustomButton:b.Z},methods:{async submit(){M.validate(this.form.values,{abortEarly:!1}).then((async()=>{this.form.errors={username:"",password:""};const e=await fetch("http://localhost:8080/api/v1/user/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form.values)});if(e.ok){console.log("Login successful!");const r=await e.json();localStorage.setItem("token",r.token),this.store.login({username:this.form.values.username,role:r.role,userId:r.userid}),this.$router.push({path:"/"})}else{const r=await e.json();this.errorMessage="Error registering user: "+r.message,this.isErrorModalVisible=!0}})).catch((e=>{this.errorMessage="Error registering user: "+e.message,this.isErrorModalVisible=!0,e.inner&&Array.isArray(e.inner)&&e.inner.forEach((e=>{this.form.errors[e.path]&&(this.form.errors[e.path]=e.message)}))}))},validate(e){M.validateAt(e,this.form.values).then((()=>{console.log("Success validating onBlur for field: "+e),this.form.errors[e]=""})).catch((r=>{console.log("Error while validating field "+e+" onBlur , "+r.message),this.form.errors[e]=r.message}))}},data(){return{form:{values:{username:"",password:""},errors:{username:"",password:""}},isErrorModalVisible:!1,errorMessage:"",store:(0,E.V)()}}},_=s(89);const V=(0,_.Z)(x,[["render",w]]);var B=V,C={name:"LoginView",components:{Login:B}};const L=(0,_.Z)(C,[["render",t]]);var Z=L}}]);
//# sourceMappingURL=login.c2a3151a.js.map