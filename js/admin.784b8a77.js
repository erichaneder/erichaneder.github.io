"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[884],{3471:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var a=s(6768),l=s(5130),n=s(4232);const o=e=>((0,a.Qi)("data-v-2d800faf"),e=e(),(0,a.jt)(),e),i={class:"admin-container"},u=o(()=>(0,a.Lk)("h1",null,"ðŸŽ­ Contest Admin",-1)),r={class:"card black"},c=o(()=>(0,a.Lk)("label",null,"Costume name",-1)),d=o(()=>(0,a.Lk)("label",null,"Category",-1)),m=o(()=>(0,a.Lk)("option",{value:1},"Bestes EinzelkostÃ¼m",-1)),k=o(()=>(0,a.Lk)("option",{value:2},"Bestes GruppenkostÃ¼m",-1)),g=o(()=>(0,a.Lk)("option",{value:3},"Kreativstes KostÃ¼m",-1)),C=[m,k,g],h=o(()=>(0,a.Lk)("label",null,"Image",-1)),v=["src"],L=["disabled"],y={class:"card danger"},p={class:"card"},b={class:"card"},w=o(()=>(0,a.Lk)("h2",null,"Preview",-1)),f={class:"card leaderboard"},E=o(()=>(0,a.Lk)("h2",null,"Ranking",-1)),X={key:0,class:"empty"},_={key:1,class:"ranking"},F={class:"rank"},I=["src"],K={class:"info"},R={class:"name"},A={class:"votes"},B={class:"card all-costumes"},U=o(()=>(0,a.Lk)("h2",null,"All Costumes",-1)),V={key:0,class:"empty"},G={key:1,class:"costume-table"},N=o(()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Image"),(0,a.Lk)("th",null,"Name"),(0,a.Lk)("th",null,"Category"),(0,a.Lk)("th",null,"Votes"),(0,a.Lk)("th",null,"Action")])],-1)),S=["src"],j=["onClick"];function z(e,t,s,o,m,k){return(0,a.uX)(),(0,a.CE)("div",i,[u,(0,a.Lk)("div",r,[c,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.name=e),placeholder:"e.g. Pirate"},null,512),[[l.Jo,m.name]]),d,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.category=e)},C,512),[[l.u1,m.category]]),h,(0,a.Lk)("input",{type:"file",accept:"image/*",onChange:t[2]||(t[2]=(...e)=>k.onFileChange&&k.onFileChange(...e))},null,32),m.preview?((0,a.uX)(),(0,a.CE)("img",{key:0,src:m.preview,class:"preview"},null,8,v)):(0,a.Q3)("",!0),(0,a.Lk)("button",{class:"primary",disabled:!k.canSubmit,onClick:t[3]||(t[3]=(...e)=>k.addCostume&&k.addCostume(...e))}," Add costume ",8,L)]),(0,a.Lk)("div",y,[(0,a.Lk)("button",{class:"danger-btn",onClick:t[4]||(t[4]=(...e)=>k.conclude&&k.conclude(...e))}," âŒ Conclude contest ")]),(0,a.Lk)("div",p,[(0,a.Lk)("button",{class:"reset-btn",onClick:t[5]||(t[5]=(...e)=>k.resetContest&&k.resetContest(...e))}," ðŸ”„ Reset contest votes ")]),(0,a.Lk)("div",b,[w,((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)([1,2,3],e=>(0,a.Lk)("div",{key:e,class:"preview-category"},[(0,a.Lk)("h3",null,(0,n.v_)(k.categoryLabel(e)),1),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.store.getCostumesByCategory(e),e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,n.v_)(e.name)+" ("+(0,n.v_)(e.votes)+" votes) ",1))),128))])])),64))]),(0,a.Lk)("div",f,[E,((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)([1,2,3],e=>(0,a.Lk)("div",{key:e,class:"category-card"},[(0,a.Lk)("h3",null,(0,n.v_)(k.categoryLabel(e)),1),0===k.results(e).length?((0,a.uX)(),(0,a.CE)("div",X," No entries ")):((0,a.uX)(),(0,a.CE)("ol",_,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.results(e),(e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e.id,class:"rank-item"},[(0,a.Lk)("span",F,(0,n.v_)(k.medal(t)),1),(0,a.Lk)("img",{src:e.image,class:"thumb",alt:"Costume"},null,8,I),(0,a.Lk)("div",K,[(0,a.Lk)("div",R,(0,n.v_)(e.name),1),(0,a.Lk)("div",A,(0,n.v_)(e.votes)+" votes",1)])]))),128))]))])),64))]),(0,a.Lk)("div",B,[U,0===k.allCostumes.length?((0,a.uX)(),(0,a.CE)("div",V," No entries ")):((0,a.uX)(),(0,a.CE)("table",G,[N,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.allCostumes,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:e.image,alt:"Costume",class:"table-thumb"},null,8,S)]),(0,a.Lk)("td",null,(0,n.v_)(e.name),1),(0,a.Lk)("td",null,(0,n.v_)(k.categoryLabel(e.category)),1),(0,a.Lk)("td",null,(0,n.v_)(e.votes),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{class:"delete-btn",onClick:t=>k.removeCostume(e.id)}," âŒ ",8,j)])]))),128))])]))])])}s(3725),s(1339);var D=s(7683),P={name:"AdminView",data(){return{name:"",category:1,image:null,preview:null}},computed:{store(){return(0,D.G)()},canSubmit(){return this.name&&this.image&&!this.store.isContestConcluded},allCostumes(){return[1,2,3].flatMap(e=>this.store.getCostumesByCategory(e).map(t=>({...t,category:e})))}},mounted(){this.store.loadContestFromFirebase()},methods:{onFileChange(e){const t=e.target.files[0];if(!t)return;const s=new Image,a=new FileReader;a.onload=e=>{s.src=e.target.result},s.onload=()=>{const e=800,t=e/s.width,a=document.createElement("canvas");a.width=e,a.height=s.height*t;const l=a.getContext("2d");l.drawImage(s,0,0,a.width,a.height);const n=a.toDataURL("image/jpeg",.7);this.image=n,this.preview=n},a.readAsDataURL(t)},async addCostume(){this.canSubmit&&(await this.store.addCostume({category:this.category,name:this.name,image:this.image}),this.name="",this.category=1,this.image=null,this.preview=null)},async conclude(){confirm("This will stop all voting. Continue?")&&await this.store.concludeContest()},async resetContest(){confirm("Reset all votes and allow voting again?")&&await this.store.resetContest()},async removeCostume(e){confirm("Remove this costume?")&&await this.store.deleteCostume(e)},results(e){return this.store.getRankedResults(e)},categoryLabel(e){return 1===e?"Bestes EinzelkostÃ¼m":2===e?"Bestes GruppenkostÃ¼m":3===e?"Kreativstes KostÃ¼m":`Category ${e}`},medal(e){return 0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":`#${e+1}`}}},Q=s(1241);const $=(0,Q.A)(P,[["render",z],["__scopeId","data-v-2d800faf"]]);var x=$}}]);
//# sourceMappingURL=admin.784b8a77.js.map