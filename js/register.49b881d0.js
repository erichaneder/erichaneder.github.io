"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[685],{8748:function(e,a,r){r.d(a,{Z:function(){return C}});var t=r(3396),l=r(9242),o=r(7139);const i={key:0},s={class:"mb-4"},d=(0,t._)("label",{for:"salutation",class:"block text-sm mb-1"},"Salutation:",-1),n=(0,t._)("option",{value:"Male"},"Male",-1),u=(0,t._)("option",{value:"Female"},"Female",-1),m=(0,t._)("option",{value:"Other"},"Other",-1),p=[n,u,m],c={key:0,class:"text-red-500"},h={key:0,class:"mb-4"},f=(0,t._)("label",{for:"otherInfo",class:"block text-sm mb-1"},"Other Information:",-1),b={key:0,class:"text-red-500"};function w(e,a,r,n,u,m){const w=(0,t.up)("InputField");return(0,t.wg)(),(0,t.iD)("form",{onSubmit:a[4]||(a[4]=(0,l.iM)(((...e)=>m.submit&&m.submit(...e)),["prevent"]))},[r.specialSalutation?((0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",s,[d,(0,t.wy)((0,t._)("select",{id:"salutation","onUpdate:modelValue":a[0]||(a[0]=e=>u.formData.salutation=e),onBlur:a[1]||(a[1]=e=>m.validateField(u.formData.salutation,"salutation")),class:"w-full h-10 px-2 border rounded"},p,544),[[l.bM,u.formData.salutation]]),u.fieldErrors.salutation?((0,t.wg)(),(0,t.iD)("div",c,(0,o.zw)(u.fieldErrors.salutation),1)):(0,t.kq)("",!0)]),"Other"===u.formData.salutation?((0,t.wg)(),(0,t.iD)("div",h,[f,(0,t.wy)((0,t._)("input",{type:"text",id:"otherInfo",onBlur:a[2]||(a[2]=e=>m.validateField(u.formData.otherInfo,"otherInfo")),"onUpdate:modelValue":a[3]||(a[3]=e=>u.formData.otherInfo=e),maxlength:"30",class:"w-full h-10 px-2 border rounded"},null,544),[[l.nr,u.formData.otherInfo]]),u.fieldErrors.otherInfo?((0,t.wg)(),(0,t.iD)("div",b,(0,o.zw)(u.fieldErrors.otherInfo),1)):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.formFields,(e=>((0,t.wg)(),(0,t.j4)(w,{key:e.id,id:e.id,type:e.type,label:e.label,placeholder:e.placeholder,modelValue:u.formData[e.id],"onUpdate:modelValue":a=>u.formData[e.id]=a,validateField:a=>m.validateField(a,e.id),error:u.fieldErrors[e.id],options:e.options},null,8,["id","type","label","placeholder","modelValue","onUpdate:modelValue","validateField","error","options"])))),128)),(0,t.WI)(e.$slots,"default")],32)}const y={class:"mb-4"},g=["for"],v=["id","value"],D=["value"],S=["type","id","value","placeholder"],F={key:2,class:"text-red-500"};function E(e,a,r,l,i,s){return(0,t.wg)(),(0,t.iD)("div",y,[(0,t._)("label",{for:r.id,class:"block text-sm mb-1"},(0,o.zw)(r.label)+":",9,g),"select"===r.type?((0,t.wg)(),(0,t.iD)("select",{key:0,id:r.id,onBlur:a[0]||(a[0]=(...e)=>s.handleBlur&&s.handleBlur(...e)),value:r.modelValue,onChange:a[1]||(a[1]=a=>e.$emit("update:modelValue",a.target.value)),class:"w-full h-10 px-2 border rounded"},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.options,(e=>((0,t.wg)(),(0,t.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.label),9,D)))),128))],40,v)):((0,t.wg)(),(0,t.iD)("input",{key:1,type:r.type,id:r.id,onBlur:a[2]||(a[2]=(...e)=>s.handleBlur&&s.handleBlur(...e)),value:r.modelValue,onInput:a[3]||(a[3]=a=>e.$emit("update:modelValue",a.target.value)),placeholder:r.placeholder,class:"w-full h-10 px-2 border rounded"},null,40,S)),r.error?((0,t.wg)(),(0,t.iD)("div",F,(0,o.zw)(r.error),1)):(0,t.kq)("",!0)])}var k={props:{id:String,modelValue:String,label:String,type:String,placeholder:String,validateField:Function,error:String,options:Array},methods:{handleBlur(e){const a=e.target.value;this.$emit("update:modelValue",a),this.validateField&&this.validateField(a)}}},q=r(89);const _=(0,q.Z)(k,[["render",E]]);var V=_,Z={components:{InputField:V},props:{formFields:{type:Array,required:!0},formSchema:{type:Object,required:!0},initialFormData:{type:Object,required:!0},specialSalutation:{type:Boolean,required:!0}},data(){return{formData:this.initialFormData,fieldErrors:{}}},methods:{validateField(e,a){console.log("Field: "+a+", Value: "+e),this.formSchema.validateAt(a,{...this.formData,[a]:e}).then((()=>{this.fieldErrors[a]=null,"password"===a&&this.validateField(this.formData.password2,"password2")})).catch((e=>{"password2"!==a||this.formData.password2?this.fieldErrors[a]=e.message:this.fieldErrors[a]=null}))},submit(){console.log("FormData: "+JSON.stringify(this.formData)),this.formSchema.validate(this.formData,{abortEarly:!1}).then((()=>{this.$emit("formSubmit",this.formData)})).catch((e=>{e.inner.forEach((e=>{console.log("Validation failed! "+e.message),this.fieldErrors[e.path]=e.message}))}))}}};const x=(0,q.Z)(Z,[["render",w]]);var C=x},8182:function(e,a,r){r.r(a),r.d(a,{default:function(){return w}});var t=r(3396);const l={class:"min-h-screen flex flex-col items-center"},o={class:"w-96 bg-white p-8 rounded shadow mt-20"},i=(0,t._)("div",{class:"h-0.5 bg-gray-200 w-36 mx-auto mt-2.5 mb-4"},null,-1);function s(e,a,r,s,d,n){const u=(0,t.up)("NormalHeading"),m=(0,t.up)("CustomButton"),p=(0,t.up)("FormComponent"),c=(0,t.up)("ErrorModal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",l,[(0,t._)("div",o,[(0,t.Wm)(u,{text:"Register"}),i,(0,t.Wm)(p,{"form-fields":d.formFields,"form-schema":d.registerValidationSchema,"initial-form-data":d.initialRegisterFormData,"special-salutation":!0,onFormSubmit:n.submit},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{customButtonStyle:"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,t.w5)((()=>[(0,t.Uk)("Register")])),_:1})])),_:1},8,["form-fields","form-schema","initial-form-data","onFormSubmit"])])]),(0,t.Wm)(c,{isVisible:d.isErrorModalVisible,errorMessage:d.errorMessage,"onUpdate:isVisible":a[0]||(a[0]=e=>d.isErrorModalVisible=e)},null,8,["isVisible","errorMessage"])],64)}r(7658);var d=r(9427),n=r(8748),u=r(2260),m=r(432),p=r(4460),c=r(7629),h={components:{FormComponent:n.Z,NormalHeading:u.Z,ErrorModal:m.Z,CustomButton:d.Z},data(){return{isErrorModalVisible:!1,errorMessage:"",store:(0,p.V)(),formFields:[{id:"name",type:"text",label:"Name",placeholder:"Your Name"},{id:"address",type:"text",label:"Address",placeholder:"Your Address"},{id:"city",type:"text",label:"City",placeholder:"Your City"},{id:"zip",type:"text",label:"Zip",placeholder:"Your Zip"},{id:"country",type:"select",label:"Country",placeholder:"Your Country",options:[{label:"Austria (AT)",value:"AT"},{label:"Germany (DE)",value:"DE"},{label:"Switzerland (CH)",value:"CH"},{label:"United States (US)",value:"US"},{label:"Canada (CA)",value:"CA"},{label:"United Kingdom (UK)",value:"UK"},{label:"France (FR)",value:"FR"},{label:"Spain (ES)",value:"ES"},{label:"Japan (JP)",value:"JP"}]},{id:"email",type:"text",label:"Email",placeholder:"Your Email"},{id:"password",type:"password",label:"Password",placeholder:"Your Password"},{id:"password2",type:"password",label:"Repeat Passowrd",placeholder:"Repeat Password"}],registerValidationSchema:(0,c.Ry)().shape({name:(0,c.Z_)().required("Name is required"),salutation:(0,c.Z_)().required("Salutation is required"),otherInfo:(0,c.Z_)().when("salutation",{is:e=>"Other"===e,then:e=>e.required("Please specify your salutation")}),address:(0,c.Z_)().required("Address is required"),city:(0,c.Z_)().required("City is required"),zip:(0,c.Z_)().required("ZIP code is required"),country:(0,c.Z_)().required("Country is required"),email:(0,c.Z_)().email("Invalid email format").required("Email is required"),password:(0,c.Z_)().required("Password is required!").min(12,"Password must be min. 12 characters long").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{12,}$/,"Password must include uppercase, lowercase, numbers, and symbols"),password2:(0,c.Z_)().oneOf([(0,c.iH)("password"),null],"Passwords must match")}),initialRegisterFormData:{salutation:"",otherInfo:"",name:"",address:"",city:"",zip:"",country:"",email:"",password:"",password2:""}}},methods:{async submit(e){const a={salutation:"Other"===e.salutation?e.otherInfo:e.salutation,name:e.name,password:e.password,email:e.email,role:"ROLE_CUSTOMER",phonenumber:"+4322342234",address:{street:e.address,zipcode:e.zip,city:e.city,country:e.country}};console.log("Sending this data:",JSON.stringify(a));try{const r=await fetch("http://localhost:8080/api/v1/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){console.log("Registration was successful!");const a=await r.json();localStorage.setItem("token",a.token),this.store.login({username:e.email,role:a.role,userId:a.userid}),this.$router.push({path:"/"})}else{const e=await r.json();this.errorMessage="Error registering user: "+e.message,this.isErrorModalVisible=!0}}catch(r){console.error("Network error: "+r)}}}},f=r(89);const b=(0,f.Z)(h,[["render",s]]);var w=b}}]);
//# sourceMappingURL=register.49b881d0.js.map