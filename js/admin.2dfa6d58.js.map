{"version":3,"file":"js/admin.2dfa6d58.js","mappings":"6PACOA,MAAM,mB,SACTC,EAAAA,EAAAA,IAAgC,UAA5B,oBAAuB,I,GAEtBD,MAAM,c,SACTC,EAAAA,EAAAA,IAA2B,aAApB,gBAAY,I,SAGnBA,EAAAA,EAAAA,IAAuB,aAAhB,YAAQ,I,SAEbA,EAAAA,EAAAA,IAAsC,UAA7BC,MAAO,GAAG,cAAU,I,SAC7BD,EAAAA,EAAAA,IAAsC,UAA7BC,MAAO,GAAG,cAAU,I,SAC7BD,EAAAA,EAAAA,IAAsC,UAA7BC,MAAO,GAAG,cAAU,I,GAF7BC,EACAC,EACAC,G,SAGFJ,EAAAA,EAAAA,IAAoB,aAAb,SAAK,I,4BAcTD,MAAM,e,GAMNA,MAAM,Q,GAMNA,MAAM,Q,SACTC,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,I,GAmBRD,MAAM,oB,SACTC,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,I,SAWPD,MAAM,S,SAKGA,MAAM,W,GAMPA,MAAM,Q,aAUPA,MAAM,Q,GACJA,MAAM,Q,GACNA,MAAM,S,0CA/FvBM,EAAAA,EAAAA,IAqGM,MArGNC,EAqGM,CApGJC,GAEAP,EAAAA,EAAAA,IAuBM,MAvBNQ,EAuBM,CAtBJC,G,SACAT,EAAAA,EAAAA,IAAkD,S,qCAAlCU,EAAAC,KAAIC,GAAEC,YAAY,e,iBAAlBH,EAAAC,QAEhBG,G,SACAd,EAAAA,EAAAA,IAIS,U,qCAJQU,EAAAK,SAAQH,I,cAARF,EAAAK,YAMjBC,GACAhB,EAAAA,EAAAA,IAA6D,SAAtDiB,KAAK,OAAOC,OAAO,UAAWC,SAAMC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAC,cAAAD,EAAAC,gBAAAF,K,SAElCX,EAAAc,U,WAAXnB,EAAAA,EAAAA,IAAqD,O,MAAhCoB,IAAKf,EAAAc,QAASzB,MAAM,W,4BAEzCC,EAAAA,EAAAA,IAMS,UALPD,MAAM,UACL2B,UAAWJ,EAAAK,UACXC,QAAKR,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAO,YAAAP,EAAAO,cAAAR,KACT,gBAED,EAAAS,MAGF9B,EAAAA,EAAAA,IAIM,MAJN+B,EAIM,EAHJ/B,EAAAA,EAAAA,IAES,UAFDD,MAAM,aAAc6B,QAAKR,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAU,UAAAV,EAAAU,YAAAX,KAAU,2BAK/CrB,EAAAA,EAAAA,IAIM,MAJNiC,EAIM,EAHJjC,EAAAA,EAAAA,IAES,UAFDD,MAAM,YAAa6B,QAAKR,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAY,cAAAZ,EAAAY,gBAAAb,KAAc,+BAKlDrB,EAAAA,EAAAA,IAkBM,MAlBNmC,EAkBM,CAjBJC,I,WAEA/B,EAAAA,EAAAA,IAcMgC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAbU,CAAC,EAAD,KAAPC,IADTvC,EAAAA,EAAAA,IAcM,OAZHwC,IAAKD,EACNxC,MAAM,oB,EAENC,EAAAA,EAAAA,IAA2B,UAAvB,aAASyC,EAAAA,EAAAA,IAAGF,GAAG,IACnBvC,EAAAA,EAAAA,IAOK,a,aANHK,EAAAA,EAAAA,IAKKgC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJShB,EAAAoB,MAAMC,sBAAsBJ,GAAjCK,K,WADTvC,EAAAA,EAAAA,IAKK,MAHFmC,IAAKI,EAAEC,K,QAELD,EAAEjC,MAAO,MAAE8B,EAAAA,EAAAA,IAAGG,EAAEE,OAAQ,WAC7B,K,mBAKN9C,EAAAA,EAAAA,IAwCM,MAxCN+C,EAwCM,CAvCJC,I,WAEA3C,EAAAA,EAAAA,IAoCMgC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAnCe,CAAC,EAAG,EAAG,GAAnBvB,IADTf,EAAAA,EAAAA,IAoCM,OAlCHwC,IAAKzB,EACNhB,MAAM,iB,EAENC,EAAAA,EAAAA,IAAgC,UAA5B,aAASyC,EAAAA,EAAAA,IAAG1B,GAAQ,GAGa,IAA7BO,EAAA2B,QAAQlC,GAAUmC,S,WAD1B7C,EAAAA,EAAAA,IAKM,MALN8C,EAGC,mB,WAID9C,EAAAA,EAAAA,IAqBK,KArBL+C,EAqBK,G,aApBH/C,EAAAA,EAAAA,IAmBKgC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAlBwBhB,EAAA2B,QAAQlC,GAAQ,CAAnCsC,EAASC,M,WADnBjD,EAAAA,EAAAA,IAmBK,MAjBFmC,IAAKa,EAAQR,GACd9C,MAAM,a,EAENC,EAAAA,EAAAA,IAEO,OAFPuD,GAEOd,EAAAA,EAAAA,IADFnB,EAAAkC,MAAMF,IAAK,IAGhBtD,EAAAA,EAAAA,IAIE,OAHCyB,IAAK4B,EAAQI,MACd1D,MAAM,QACN2D,IAAI,W,WAGN1D,EAAAA,EAAAA,IAGM,MAHN2D,EAGM,EAFJ3D,EAAAA,EAAAA,IAA0C,MAA1C4D,GAA0CnB,EAAAA,EAAAA,IAArBY,EAAQ1C,MAAI,IACjCX,EAAAA,EAAAA,IAAkD,MAAlD6D,GAAkDpB,EAAAA,EAAAA,IAA5BY,EAAQP,OAAQ,SAAM,S,mCAY1D,GACEnC,KAAM,YAENmD,IAAAA,GACE,MAAO,CACLnD,KAAM,GACNI,SAAU,EACV0C,MAAO,KACPjC,QAAS,KAEb,EAEAuC,SAAU,CACRrB,KAAAA,GACE,OAAOsB,EAAAA,EAAAA,IACT,EACArC,SAAAA,GACE,OAAOsC,KAAKtD,MAAQsD,KAAKR,QAAUQ,KAAKvB,MAAMwB,kBAChD,GAGFC,OAAAA,GACEF,KAAKvB,MAAM0B,yBACb,EAEAC,QAAS,CACP9C,YAAAA,CAAa+C,GACX,MAAMC,EAAOD,EAAEE,OAAOC,MAAM,GAC5B,IAAKF,EAAM,OAEX,MAAMG,EAAM,IAAIC,MACVC,EAAS,IAAIC,WAEnBD,EAAOE,OAAUC,IACfL,EAAIjD,IAAMsD,EAAMP,OAAOQ,QAGzBN,EAAII,OAAS,KACX,MAAMG,EAAY,IACZC,EAAQD,EAAYP,EAAIS,MAExBC,EAASC,SAASC,cAAc,UACtCF,EAAOD,MAAQF,EACfG,EAAOG,OAASb,EAAIa,OAASL,EAE7B,MAAMM,EAAMJ,EAAOK,WAAW,MAC9BD,EAAIE,UAAUhB,EAAK,EAAG,EAAGU,EAAOD,MAAOC,EAAOG,QAE9C,MAAMI,EAAmBP,EAAOQ,UAAU,aAAc,IAExD3B,KAAKR,MAAQkC,EACb1B,KAAKzC,QAAUmE,GAGjBf,EAAOiB,cAActB,EACvB,EAEA,gBAAM1C,GACCoC,KAAKtC,kBAEJsC,KAAKvB,MAAMb,WAAW,CAC1Bd,SAAUkD,KAAKlD,SACfJ,KAAMsD,KAAKtD,KACX8C,MAAOQ,KAAKR,QAGdQ,KAAKtD,KAAO,GACZsD,KAAKlD,SAAW,EAChBkD,KAAKR,MAAQ,KACbQ,KAAKzC,QAAU,KACjB,EAEA,cAAMQ,GACC8D,QAAQ,+CACP7B,KAAKvB,MAAMqD,iBACnB,EAEA,kBAAM7D,GACC4D,QAAQ,kDACP7B,KAAKvB,MAAMR,cACnB,EAEAe,OAAAA,CAAQlC,GACN,OAAOkD,KAAKvB,MAAMsD,iBAAiBjF,EACrC,EAEAyC,KAAAA,CAAMF,GACJ,OAAc,IAAVA,EAAoB,KACV,IAAVA,EAAoB,KACV,IAAVA,EAAoB,KACjB,IAAIA,EAAQ,GACrB,I,UChMJ,MAAM2C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://frontend/./src/views/AdminView.vue","webpack://frontend/./src/views/AdminView.vue?e347"],"sourcesContent":["<template>\n  <div class=\"admin-container\">\n    <h1>&#x1F3AD; Contest Admin</h1>\n\n    <div class=\"card black\">\n      <label>Costume name</label>\n      <input v-model=\"name\" placeholder=\"e.g. Pirate\" />\n\n      <label>Category</label>\n      <select v-model=\"category\">\n        <option :value=\"1\">Category 1</option>\n        <option :value=\"2\">Category 2</option>\n        <option :value=\"3\">Category 3</option>\n      </select>\n\n      <label>Image</label>\n      <input type=\"file\" accept=\"image/*\" @change=\"onFileChange\" />\n\n      <img v-if=\"preview\" :src=\"preview\" class=\"preview\" />\n\n      <button\n        class=\"primary\"\n        :disabled=\"!canSubmit\"\n        @click=\"addCostume\"\n      >\n        Add costume\n      </button>\n    </div>\n\n    <div class=\"card danger\">\n      <button class=\"danger-btn\" @click=\"conclude\">\n        &#x274C; Conclude contest\n      </button>\n    </div>\n\n    <div class=\"card\">\n      <button class=\"reset-btn\" @click=\"resetContest\">\n        &#x1F504; Reset contest votes\n      </button>\n    </div>\n\n    <div class=\"card\">\n      <h2>Preview</h2>\n\n      <div\n        v-for=\"cat in [1,2,3]\"\n        :key=\"cat\"\n        class=\"preview-category\"\n      >\n        <h3>Category {{ cat }}</h3>\n        <ul>\n          <li\n            v-for=\"c in store.getCostumesByCategory(cat)\"\n            :key=\"c.id\"\n          >\n            {{ c.name }} ({{ c.votes }} votes)\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class=\"card leaderboard\">\n      <h2>Ranking</h2>\n\n      <div\n        v-for=\"category in [1, 2, 3]\"\n        :key=\"category\"\n        class=\"category-card\"\n      >\n        <h3>Category {{ category }}</h3>\n\n        <div\n          v-if=\"results(category).length === 0\"\n          class=\"empty\"\n        >\n          No entries\n        </div>\n\n        <ol v-else class=\"ranking\">\n          <li\n            v-for=\"(costume, index) in results(category)\"\n            :key=\"costume.id\"\n            class=\"rank-item\"\n          >\n            <span class=\"rank\">\n              {{ medal(index) }}\n            </span>\n\n            <img\n              :src=\"costume.image\"\n              class=\"thumb\"\n              alt=\"Costume\"\n            />\n\n            <div class=\"info\">\n              <div class=\"name\">{{ costume.name }}</div>\n              <div class=\"votes\">{{ costume.votes }} votes</div>\n            </div>\n          </li>\n        </ol>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useCompleteStore } from '@/store/store';\n\nexport default {\n  name: 'AdminView',\n\n  data() {\n    return {\n      name: '',\n      category: 1,\n      image: null,\n      preview: null\n    };\n  },\n\n  computed: {\n    store() {\n      return useCompleteStore();\n    },\n    canSubmit() {\n      return this.name && this.image && !this.store.isContestConcluded;\n    }\n  },\n\n  mounted() {\n    this.store.loadContestFromFirebase();\n  },\n\n  methods: {\n    onFileChange(e) {\n      const file = e.target.files[0];\n      if (!file) return;\n\n      const img = new Image();\n      const reader = new FileReader();\n\n      reader.onload = (event) => {\n        img.src = event.target.result;\n      };\n\n      img.onload = () => {\n        const MAX_WIDTH = 800;\n        const scale = MAX_WIDTH / img.width;\n\n        const canvas = document.createElement('canvas');\n        canvas.width = MAX_WIDTH;\n        canvas.height = img.height * scale;\n\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n        const compressedBase64 = canvas.toDataURL('image/jpeg', 0.7);\n\n        this.image = compressedBase64;\n        this.preview = compressedBase64;\n      };\n\n      reader.readAsDataURL(file);\n    },\n\n    async addCostume() {\n      if (!this.canSubmit) return;\n\n      await this.store.addCostume({\n        category: this.category,\n        name: this.name,\n        image: this.image\n      });\n\n      this.name = '';\n      this.category = 1;\n      this.image = null;\n      this.preview = null;\n    },\n\n    async conclude() {\n      if (!confirm('This will stop all voting. Continue?')) return;\n      await this.store.concludeContest();\n    },\n\n    async resetContest() {\n      if (!confirm('Reset all votes and allow voting again?')) return;\n      await this.store.resetContest();\n    },\n\n    results(category) {\n      return this.store.getRankedResults(category);\n    },\n\n    medal(index) {\n      if (index === 0) return '\\uD83E\\uDD47';\n      if (index === 1) return '\\uD83E\\uDD48';\n      if (index === 2) return '\\uD83E\\uDD49';\n      return `#${index + 1}`;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.admin-container {\n  padding: 16px;\n  max-width: 480px;\n  margin: 0 auto;\n}\n\nh1 {\n  text-align: center;\n  margin-bottom: 16px;\n}\n\n.card {\n  background: #111;\n  color: white;\n  padding: 16px;\n  border-radius: 12px;\n  margin-bottom: 16px;\n}\n\nlabel {\n  display: block;\n  margin-top: 12px;\n  font-size: 0.9rem;\n}\n\ninput,\nselect {\n  width: 100%;\n  padding: 12px;\n  margin-top: 4px;\n  border-radius: 8px;\n  border: none;\n}\n\n.preview {\n  width: 100%;\n  margin-top: 12px;\n  border-radius: 12px;\n}\n\n.primary {\n  width: 100%;\n  margin-top: 16px;\n  padding: 14px;\n  font-size: 1.1rem;\n  border-radius: 12px;\n  border: none;\n  background: #4caf50;\n  color: white;\n}\n\n.primary:disabled {\n  opacity: 0.4;\n}\n\n.danger {\n  background: #220000;\n}\n\n.danger-btn {\n  width: 100%;\n  padding: 14px;\n  font-size: 1.1rem;\n  border-radius: 12px;\n  border: none;\n  background: #ff3333;\n  color: white;\n}\n\n.reset-btn {\n  width: 100%;\n  padding: 14px;\n  font-size: 1.1rem;\n  border-radius: 12px;\n  border: none;\n  background: #1f2937;\n  color: white;\n}\n\n.preview-category h3 {\n  margin-top: 12px;\n}\n\nul {\n  padding-left: 16px;\n}\n\n.leaderboard {\n  color: white;\n}\n\n.category-card {\n  background: #0f0f0f;\n  color: white;\n  padding: 16px;\n  border-radius: 16px;\n  margin-top: 16px;\n}\n\n.category-card h3 {\n  margin-bottom: 12px;\n}\n\n.empty {\n  opacity: 0.6;\n  font-style: italic;\n}\n\n.ranking {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.rank-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n  background: #000;\n  padding: 10px;\n  border-radius: 12px;\n}\n\n.rank {\n  font-size: 1.6rem;\n  width: 40px;\n  text-align: center;\n}\n\n.thumb {\n  width: 56px;\n  height: 56px;\n  object-fit: cover;\n  border-radius: 8px;\n  margin-right: 12px;\n}\n\n.info {\n  flex: 1;\n}\n\n.name {\n  font-weight: 600;\n  font-size: 1.1rem;\n}\n\n.votes {\n  font-size: 0.9rem;\n  opacity: 0.7;\n}\n\n.black {\n  color: black;\n}\n</style>\r\n","import { render } from \"./AdminView.vue?vue&type=template&id=3004ece4&scoped=true\"\nimport script from \"./AdminView.vue?vue&type=script&lang=js\"\nexport * from \"./AdminView.vue?vue&type=script&lang=js\"\n\nimport \"./AdminView.vue?vue&type=style&index=0&id=3004ece4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3004ece4\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","value","_hoisted_6","_hoisted_7","_hoisted_8","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$data","name","$event","placeholder","_hoisted_5","category","_hoisted_10","type","accept","onChange","_cache","args","$options","onFileChange","preview","src","disabled","canSubmit","onClick","addCostume","_hoisted_12","_hoisted_13","conclude","_hoisted_14","resetContest","_hoisted_15","_hoisted_16","_Fragment","_renderList","cat","key","_toDisplayString","store","getCostumesByCategory","c","id","votes","_hoisted_17","_hoisted_18","results","length","_hoisted_19","_hoisted_20","costume","index","_hoisted_21","medal","image","alt","_hoisted_23","_hoisted_24","_hoisted_25","data","computed","useCompleteStore","this","isContestConcluded","mounted","loadContestFromFirebase","methods","e","file","target","files","img","Image","reader","FileReader","onload","event","result","MAX_WIDTH","scale","width","canvas","document","createElement","height","ctx","getContext","drawImage","compressedBase64","toDataURL","readAsDataURL","confirm","concludeContest","getRankedResults","__exports__","render"],"ignoreList":[],"sourceRoot":""}