"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[905],{4639:function(r,e,o){o.r(e),o.d(e,{default:function(){return U}});var s=o(3396),t=o(9242),i=o(7139);const a={class:"container mx-auto my-8 px-4 mb-40 flex flex-col items-center"},l={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-8",role:"alert"},d=(0,s._)("strong",{class:"font-bold"},"Success!",-1),n=(0,s._)("span",{class:"block sm:inline"},"Product successfully changed!",-1),u=[d,n],c={class:"bg-white p-8 rounded-lg shadow-md w-full max-w-xl"},m={class:"mb-4"},p=(0,s._)("label",{for:"productName",class:"block text-sm mb-1"},"Product Name:",-1),f={key:0,class:"text-red-500"},b={class:"mb-4"},h=(0,s._)("label",{for:"productPrice",class:"block text-sm mb-1"},"Price:",-1),v={key:0,class:"text-red-500"},g={class:"mb-4"},w=(0,s._)("label",{for:"productDescription",class:"block text-sm mb-1"},"Description:",-1),x={key:0,class:"text-red-500"};function y(r,e,o,d,n,y){const k=(0,s.up)("NormalHeading"),P=(0,s.up)("CustomButton"),_=(0,s.up)("ErrorModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[n.showAlert?((0,s.wg)(),(0,s.iD)("div",l,u)):(0,s.kq)("",!0),(0,s.Wm)(k,{text:"Edit Product"}),(0,s._)("div",c,[(0,s._)("form",{onSubmit:e[6]||(e[6]=(0,t.iM)(((...r)=>y.updateProduct&&y.updateProduct(...r)),["prevent"]))},[(0,s._)("div",m,[p,(0,s.wy)((0,s._)("input",{type:"text",id:"productName","onUpdate:modelValue":e[0]||(e[0]=r=>n.form.values.name=r),onBlur:e[1]||(e[1]=r=>y.validate("name")),class:"w-full h-10 px-2 border rounded"},null,544),[[t.nr,n.form.values.name]]),n.form.errors.name?((0,s.wg)(),(0,s.iD)("p",f,(0,i.zw)(n.form.errors.name),1)):(0,s.kq)("",!0)]),(0,s._)("div",b,[h,(0,s.wy)((0,s._)("input",{type:"number",id:"productPrice",step:"0.01","onUpdate:modelValue":e[2]||(e[2]=r=>n.form.values.price=r),onBlur:e[3]||(e[3]=r=>y.validate("price")),class:"w-full h-10 px-2 border rounded"},null,544),[[t.nr,n.form.values.price,void 0,{number:!0}]]),n.form.errors.price?((0,s.wg)(),(0,s.iD)("p",v,(0,i.zw)(n.form.errors.price),1)):(0,s.kq)("",!0)]),(0,s._)("div",g,[w,(0,s.wy)((0,s._)("textarea",{id:"productDescription","onUpdate:modelValue":e[4]||(e[4]=r=>n.form.values.description=r),onBlur:e[5]||(e[5]=r=>y.validate("description")),class:"w-full px-2 border rounded",rows:"4"},null,544),[[t.nr,n.form.values.description]]),n.form.errors.description?((0,s.wg)(),(0,s.iD)("p",x,(0,i.zw)(n.form.errors.description),1)):(0,s.kq)("",!0)]),(0,s.Wm)(P,{type:"submit",customButtonStyle:"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("Update Product")])),_:1})],32)])]),(0,s.Wm)(_,{isVisible:n.isErrorModalVisible,errorMessage:n.errorMessage,"onUpdate:isVisible":e[7]||(e[7]=r=>n.isErrorModalVisible=r)},null,8,["isVisible","errorMessage"])],64)}var k=o(9427),P=o(2260),_=o(432),M=o(4460),V=o(7629);const E=(0,V.Ry)().shape({name:(0,V.Z_)().required("Product name is required"),price:(0,V.Rx)().positive("Price must be a positive number").required("Price is required"),description:(0,V.Z_)().required("Product description is required")});var q={components:{CustomButton:k.Z,NormalHeading:P.Z,ErrorModal:_.Z},data(){return{form:{values:{id:null,name:"",price:0,description:""},errors:{name:"",price:"",description:""}},store:(0,M.V)(),isErrorModalVisible:!1,errorMessage:"",showAlert:!1}},methods:{async updateProduct(){E.validate(this.form.values,{abortEarly:!1}).then((async()=>{this.form.errors={name:"",price:"",description:""};const r=await this.store.updateProduct(this.form.values);r?(this.showAlert=!0,setTimeout(this.resetForm,2e3)):(this.errorMessage="Error adding product!",this.isErrorModalVisible=!0)})).catch((r=>{console.log(r),this.errorMessage="Error updating product: "+r,this.isErrorModalVisible=!0}))},validate(r){E.validateAt(r,this.form.values).then((()=>{this.form.errors[r]=""})).catch((e=>{this.form.errors[r]=e.message}))}},async mounted(){const r=parseInt(this.$route.params.productId),e=this.store.getProductById(r);e?this.form.values={...e}:console.error("Product not found")}},D=o(89);const B=(0,D.Z)(q,[["render",y]]);var U=B}}]);
//# sourceMappingURL=editProduct.dcda6b08.js.map