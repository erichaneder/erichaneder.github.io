{"version":3,"file":"js/login.19d006ea.js","mappings":"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","sources":["webpack://frontend/./src/components/pages/LoginView.vue","webpack://frontend/./src/components/templates/LoginComponent.vue","webpack://frontend/./node_modules/jwt-decode/build/esm/index.js","webpack://frontend/./src/components/templates/LoginComponent.vue?c069","webpack://frontend/./src/components/pages/LoginView.vue?c04d"],"sourcesContent":["<template>\r\n    <div class=\"login\">\r\n      <Login />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  // @ is an alias to /src\r\n  import Login from '@/components/templates/LoginComponent.vue'\r\n  \r\n  \r\n  export default {\r\n    name: 'LoginView',\r\n    components: {\r\n      Login\r\n    }\r\n  }\r\n  </script>\r\n  ","<template>\r\n  <div class=\"min-h-screen flex flex-col items-center px-5\">\r\n    <div class=\"w-96 bg-white p-8 rounded shadow mt-20\">\r\n      <NormalHeading text=\"Login\" />\r\n      <div class=\"h-0.5 bg-gray-200 w-36 mx-auto mt-2.5 mb-4\"></div>\r\n      <form @submit.prevent=\"submit\">\r\n        <div class=\"mb-4\">\r\n          <label for=\"username\" class=\"block text-sm mb-1\">Username / Email:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            class=\"w-full h-10 px-2 border rounded\"\r\n            v-model=\"form.values.username\"\r\n            @blur=\"validate('username')\"\r\n          />\r\n          <p class=\"text-red-500\" v-if=\"!!form.errors.username\">\r\n            {{ form.errors.username }}\r\n          </p>\r\n        </div>\r\n        <div class=\"mb-6\">\r\n          <label for=\"password\" class=\"block text-sm mb-1\">Password:</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            class=\"w-full h-10 px-2 border rounded\"\r\n            v-model=\"form.values.password\"\r\n            @blur=\"validate('password')\"\r\n          />\r\n          <p class=\"text-red-500\" v-if=\"!!form.errors.password\">\r\n            {{ form.errors.password }}\r\n          </p>\r\n        </div>\r\n        <CustomButton\r\n          type=\"submit\"\r\n          CustomButtonStyle=\"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500\"\r\n          >Login</CustomButton\r\n        >\r\n      </form>\r\n    </div>\r\n  </div>\r\n\r\n  <ErrorModal\r\n    :isVisible=\"isErrorModalVisible\"\r\n    :errorMessage=\"errorMessage\"\r\n    @update:isVisible=\"isErrorModalVisible = $event\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport CustomButton from \"@/components/atoms/Button.vue\";\r\nimport NormalHeading from \"@/components/atoms/NormalHeading.vue\";\r\nimport axios from 'axios';\r\nimport ErrorModal from \"@/components/atoms/ErrorModal.vue\";\r\nimport { object, string } from \"yup\";\r\nimport { useCompleteStore } from \"@/store/store\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nconst loginSchema = object().shape({\r\n  username: string().required(\"Please enter your Username or Email!\"),\r\n  password: string().required(\"Please enter your password!\"),\r\n});\r\n\r\nexport default {\r\n  name: \"LoginComponent\",\r\n  components: {\r\n    NormalHeading,\r\n    ErrorModal,\r\n    CustomButton,\r\n  },\r\n  methods: {\r\n    async submit() {\r\n      loginSchema\r\n        .validate(this.form.values, { abortEarly: false })\r\n        .then(async () => {\r\n          this.form.errors = {\r\n            username: \"\",\r\n            password: \"\",\r\n          };\r\n          //client validation successful\r\n          const response = await axios.post(\"http://localhost:8080/api/v1/user/signin\", this.form.values);\r\n\r\n          if (response.status == 200) {\r\n            // get the token from the data from the server\r\n            const responseData = await response.data;\r\n            console.log(\"Login successful! \" + JSON.stringify(responseData));\r\n            // save the token in the browser for reuse\r\n            localStorage.setItem(\"token\", responseData.token);\r\n            const decodedToken = jwtDecode(responseData.token);\r\n            this.store.login({username: this.form.values.username, role: decodedToken.role, userId: decodedToken.userId});\r\n            this.$router.push({ path: \"/\" });\r\n          } else {\r\n            const errorData = await response.data;\r\n            console.log(JSON.stringify(errorData));\r\n            this.errorMessage = \"Error registering user: \"+errorData.message;\r\n            this.isErrorModalVisible = true;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.errorMessage = \"Error registering user: \" + err.message;\r\n          this.isErrorModalVisible = true;\r\n          if (err.inner && Array.isArray(err.inner)) {\r\n            err.inner.forEach((error) => {\r\n              if (this.form.errors[error.path]) {\r\n                this.form.errors[error.path] = error.message;\r\n              }\r\n            });\r\n          }\r\n        });\r\n    },\r\n    validate(field) {\r\n      loginSchema\r\n        .validateAt(field, this.form.values)\r\n        .then(() => {\r\n          console.log(\"Success validating onBlur for field: \" + field);\r\n          this.form.errors[field] = \"\";\r\n        })\r\n        .catch((err) => {\r\n          console.log(\r\n            \"Error while validating field \" + field + \" onBlur , \" + err.message\r\n          );\r\n          this.form.errors[field] = err.message;\r\n        });\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        values: { username: \"\", password: \"\" },\r\n        errors: { username: \"\", password: \"\" },\r\n      },\r\n      isErrorModalVisible: false,\r\n      errorMessage: \"\",\r\n      store: useCompleteStore()\r\n    };\r\n  },\r\n};\r\n</script>\r\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","import { render } from \"./LoginComponent.vue?vue&type=template&id=2294ca8a\"\nimport script from \"./LoginComponent.vue?vue&type=script&lang=js\"\nexport * from \"./LoginComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./LoginView.vue?vue&type=template&id=69c0dbba\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_Login","_createElementVNode","for","_hoisted_2","_component_NormalHeading","text","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","submit","_hoisted_4","_hoisted_5","type","id","$data","form","values","username","$event","onBlur","validate","errors","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","password","_hoisted_9","_component_CustomButton","CustomButtonStyle","_component_ErrorModal","isVisible","isErrorModalVisible","errorMessage","InvalidTokenError","Error","b64DecodeUnicode","str","decodeURIComponent","atob","replace","m","p","code","charCodeAt","toString","toUpperCase","length","base64UrlDecode","output","err","jwtDecode","token","options","pos","header","part","split","decoded","e","message","JSON","parse","prototype","name","loginSchema","object","shape","string","required","components","NormalHeading","ErrorModal","CustomButton","methods","this","abortEarly","then","async","response","axios","post","status","responseData","data","console","log","stringify","localStorage","setItem","decodedToken","store","login","role","userId","$router","push","path","errorData","catch","inner","Array","isArray","forEach","error","field","validateAt","useCompleteStore","__exports__","Login","render"],"sourceRoot":""}