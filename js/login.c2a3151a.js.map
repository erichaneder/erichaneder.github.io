{"version":3,"file":"js/login.c2a3151a.js","mappings":"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","sources":["webpack://frontend/./src/components/pages/LoginView.vue","webpack://frontend/./src/components/templates/LoginComponent.vue","webpack://frontend/./src/components/templates/LoginComponent.vue?c069","webpack://frontend/./src/components/pages/LoginView.vue?c04d"],"sourcesContent":["<template>\r\n    <div class=\"login\">\r\n      <Login />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  // @ is an alias to /src\r\n  import Login from '@/components/templates/LoginComponent.vue'\r\n  \r\n  \r\n  export default {\r\n    name: 'LoginView',\r\n    components: {\r\n      Login\r\n    }\r\n  }\r\n  </script>\r\n  ","<template>\r\n  <div class=\"min-h-screen flex flex-col items-center px-5\">\r\n    <div class=\"w-96 bg-white p-8 rounded shadow mt-20\">\r\n      <NormalHeading text=\"Login\" />\r\n      <div class=\"h-0.5 bg-gray-200 w-36 mx-auto mt-2.5 mb-4\"></div>\r\n      <form @submit.prevent=\"submit\">\r\n        <div class=\"mb-4\">\r\n          <label for=\"username\" class=\"block text-sm mb-1\">Username / Email:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            class=\"w-full h-10 px-2 border rounded\"\r\n            v-model=\"form.values.username\"\r\n            @blur=\"validate('username')\"\r\n          />\r\n          <p class=\"text-red-500\" v-if=\"!!form.errors.username\">\r\n            {{ form.errors.username }}\r\n          </p>\r\n        </div>\r\n        <div class=\"mb-6\">\r\n          <label for=\"password\" class=\"block text-sm mb-1\">Password:</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            class=\"w-full h-10 px-2 border rounded\"\r\n            v-model=\"form.values.password\"\r\n            @blur=\"validate('password')\"\r\n          />\r\n          <p class=\"text-red-500\" v-if=\"!!form.errors.password\">\r\n            {{ form.errors.password }}\r\n          </p>\r\n        </div>\r\n        <CustomButton\r\n          type=\"submit\"\r\n          CustomButtonStyle=\"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500\"\r\n          >Login</CustomButton\r\n        >\r\n      </form>\r\n    </div>\r\n  </div>\r\n\r\n  <ErrorModal\r\n    :isVisible=\"isErrorModalVisible\"\r\n    :errorMessage=\"errorMessage\"\r\n    @update:isVisible=\"isErrorModalVisible = $event\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport CustomButton from \"@/components/atoms/Button.vue\";\r\nimport NormalHeading from \"@/components/atoms/NormalHeading.vue\";\r\n//import axios from 'axios';\r\nimport ErrorModal from \"@/components/atoms/ErrorModal.vue\";\r\nimport { object, string } from \"yup\";\r\nimport { useCompleteStore } from \"@/store/store\";\r\n\r\nconst loginSchema = object().shape({\r\n  username: string().required(\"Please enter your Username or Email!\"),\r\n  password: string().required(\"Please enter your password!\"),\r\n});\r\n\r\nexport default {\r\n  name: \"LoginComponent\",\r\n  components: {\r\n    NormalHeading,\r\n    ErrorModal,\r\n    CustomButton,\r\n  },\r\n  methods: {\r\n    async submit() {\r\n      loginSchema\r\n        .validate(this.form.values, { abortEarly: false })\r\n        .then(async () => {\r\n          this.form.errors = {\r\n            username: \"\",\r\n            password: \"\",\r\n          };\r\n          //client validation successful\r\n\r\n          const response = await fetch(\"http://localhost:8080/api/v1/user/signin\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify(this.form.values),\r\n          });\r\n\r\n          if (response.ok) {\r\n            console.log(\"Login successful!\");\r\n            // get the token from the data from the server\r\n            const responseData = await response.json();\r\n            // save the token in the browser for reuse\r\n            localStorage.setItem(\"token\", responseData.token);\r\n            this.store.login({username: this.form.values.username, role: responseData.role, userId: responseData.userid});\r\n            this.$router.push({ path: \"/\" });\r\n          } else {\r\n            const errorData = await response.json();\r\n            this.errorMessage = \"Error registering user: \"+errorData.message;\r\n            this.isErrorModalVisible = true;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.errorMessage = \"Error registering user: \" + err.message;\r\n          this.isErrorModalVisible = true;\r\n          if (err.inner && Array.isArray(err.inner)) {\r\n            err.inner.forEach((error) => {\r\n              if (this.form.errors[error.path]) {\r\n                this.form.errors[error.path] = error.message;\r\n              }\r\n            });\r\n          }\r\n        });\r\n    },\r\n    validate(field) {\r\n      loginSchema\r\n        .validateAt(field, this.form.values)\r\n        .then(() => {\r\n          console.log(\"Success validating onBlur for field: \" + field);\r\n          this.form.errors[field] = \"\";\r\n        })\r\n        .catch((err) => {\r\n          console.log(\r\n            \"Error while validating field \" + field + \" onBlur , \" + err.message\r\n          );\r\n          this.form.errors[field] = err.message;\r\n        });\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        values: { username: \"\", password: \"\" },\r\n        errors: { username: \"\", password: \"\" },\r\n      },\r\n      isErrorModalVisible: false,\r\n      errorMessage: \"\",\r\n      store: useCompleteStore()\r\n    };\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./LoginComponent.vue?vue&type=template&id=02e68030\"\nimport script from \"./LoginComponent.vue?vue&type=script&lang=js\"\nexport * from \"./LoginComponent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./LoginView.vue?vue&type=template&id=69c0dbba\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_Login","_createElementVNode","for","_hoisted_2","_component_NormalHeading","text","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","submit","_hoisted_4","_hoisted_5","type","id","$data","form","values","username","$event","onBlur","validate","errors","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","password","_hoisted_9","_component_CustomButton","CustomButtonStyle","_component_ErrorModal","isVisible","isErrorModalVisible","errorMessage","loginSchema","object","shape","string","required","name","components","NormalHeading","ErrorModal","CustomButton","methods","this","abortEarly","then","async","response","fetch","method","headers","body","JSON","stringify","ok","console","log","responseData","json","localStorage","setItem","token","store","login","role","userId","userid","$router","push","path","errorData","message","catch","err","inner","Array","isArray","forEach","error","field","validateAt","data","useCompleteStore","__exports__","Login","render"],"sourceRoot":""}