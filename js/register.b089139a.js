"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[685],{2880:function(e,r,o){o.d(r,{Z:function(){return c}});var l=o(3396),t=o(7139);const a={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center"},s={class:"bg-white p-4 rounded shadow-md w-96"},i={class:"text-red-600 font-bold"};function n(e,r,o,n,d,u){return o.isVisible?((0,l.wg)(),(0,l.iD)("div",a,[(0,l._)("div",s,[(0,l._)("p",i,(0,t.zw)(o.errorMessage),1),(0,l._)("button",{onClick:r[0]||(r[0]=(...e)=>u.closeModal&&u.closeModal(...e)),class:"mt-4 p-2 bg-red-600 text-white rounded"},"Close")])])):(0,l.kq)("",!0)}var d={props:{isVisible:Boolean,errorMessage:String},methods:{closeModal(){this.$emit("update:isVisible",!1)}}},u=o(89);const m=(0,u.Z)(d,[["render",n]]);var c=m},1521:function(e,r,o){o.r(r),o.d(r,{default:function(){return R}});var l=o(3396);const t={class:"register"};function a(e,r,o,a,s,i){const n=(0,l.up)("Register");return(0,l.wg)(),(0,l.iD)("div",t,[(0,l.Wm)(n)])}const s={class:"min-h-screen flex flex-col items-center"},i={class:"w-96 bg-white p-8 rounded shadow mt-20"},n=(0,l._)("div",{class:"h-0.5 bg-gray-200 w-36 mx-auto mt-2.5 mb-4"},null,-1),d=(0,l._)("button",{type:"submit",class:"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},"Register",-1);function u(e,r,o,t,a,u){const m=(0,l.up)("NormalHeading"),c=(0,l.up)("FormComponent"),p=(0,l.up)("ErrorModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l._)("div",i,[(0,l.Wm)(m,{text:"Register"}),n,(0,l.Wm)(c,{onFormSubmit:u.submit},{default:(0,l.w5)((()=>[d])),_:1},8,["onFormSubmit"])])]),(0,l.Wm)(p,{isVisible:a.isErrorModalVisible,errorMessage:a.errorMessage,"onUpdate:isVisible":r[0]||(r[0]=e=>a.isErrorModalVisible=e)},null,8,["isVisible","errorMessage"])],64)}o(7658);var m=o(9242);const c={class:"flex space-x-4"};function p(e,r,o,t,a,s){const i=(0,l.up)("InputField");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:r[7]||(r[7]=(0,m.iM)(((...e)=>t.submit&&t.submit(...e)),["prevent"]))},[(0,l.Wm)(i,{modelValue:t.formData.name,"onUpdate:modelValue":r[0]||(r[0]=e=>t.formData.name=e),id:"name",label:"Name",errors:t.fieldErrors.name,type:"text",placeholder:"Your Name"},null,8,["modelValue","errors"]),(0,l.Wm)(i,{modelValue:t.formData.address,"onUpdate:modelValue":r[1]||(r[1]=e=>t.formData.address=e),id:"address",label:"Address",errors:t.fieldErrors.address,type:"text",placeholder:"Your Address"},null,8,["modelValue","errors"]),(0,l._)("div",c,[(0,l.Wm)(i,{modelValue:t.formData.city,"onUpdate:modelValue":r[2]||(r[2]=e=>t.formData.city=e),id:"city",errors:t.fieldErrors.city,label:"City",type:"text",placeholder:"Your City"},null,8,["modelValue","errors"]),(0,l.Wm)(i,{modelValue:t.formData.zip,"onUpdate:modelValue":r[3]||(r[3]=e=>t.formData.zip=e),id:"zip",errors:t.fieldErrors.zip,label:"Zip",type:"text",placeholder:"Your Zip"},null,8,["modelValue","errors"])]),(0,l.Wm)(i,{modelValue:t.formData.country,"onUpdate:modelValue":r[4]||(r[4]=e=>t.formData.country=e),id:"country",errors:t.fieldErrors.country,label:"Country",type:"text",placeholder:"Your Country"},null,8,["modelValue","errors"]),(0,l.Wm)(i,{modelValue:t.formData.email,"onUpdate:modelValue":r[5]||(r[5]=e=>t.formData.email=e),id:"email",errors:t.fieldErrors.email,label:"Email",type:"email",placeholder:"Your Email"},null,8,["modelValue","errors"]),(0,l.Wm)(i,{modelValue:t.formData.password,"onUpdate:modelValue":r[6]||(r[6]=e=>t.formData.password=e),id:"password",errors:t.fieldErrors.password,label:"Password",type:"password",placeholder:"Your Password"},null,8,["modelValue","errors"]),(0,l.WI)(e.$slots,"default")],32)}var f=o(4870),g=o(7139);const b={class:"mb-4"},y=["for"],h=["type","id","value","placeholder"],v={key:0,class:"text-red-500"};function V(e,r,o,t,a,s){return(0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("label",{for:o.id,class:"block text-sm mb-1"},(0,g.zw)(o.label)+":",9,y),(0,l._)("input",{type:o.type,id:o.id,onInput:r[0]||(r[0]=e=>t.updateValue(e)),onBlur:r[1]||(r[1]=(...e)=>t.validate&&t.validate(...e)),value:o.modelValue,placeholder:o.placeholder,class:"w-full h-10 px-2 border rounded"},null,40,h),t.fieldError?((0,l.wg)(),(0,l.iD)("div",v,(0,g.zw)(t.fieldError),1)):(0,l.kq)("",!0)])}var w={props:{id:String,modelValue:String,label:String,type:String,placeholder:String,validation:{type:Object,default:null}},setup(e,r){const o=(0,f.iH)(null),l=e=>{r.emit("update:modelValue",e.target.value)},t=()=>{e.validation&&e.validation.validate(e.modelValue).then((()=>{o.value=null})).catch((e=>{o.value=e.message,r.emit("error",o.value)}))};return{fieldError:o,updateValue:l,validate:t}}},E=o(89);const D=(0,E.Z)(w,[["render",V]]);var x=D,M={components:{InputField:x},setup(e,r){const o=(0,f.iH)({name:"",address:"",city:"",zip:"",country:"",email:"",password:""}),l=(0,f.iH)({name:null,address:null,city:null,zip:null,country:null,email:null,password:null});function t(){const e=Object.values(l.value).some((e=>e));e?console.log("Validation failed!"):(console.log("Successful validation!"),console.log("Emitting form data:",o.value),r.emit("formSubmit",o.value))}return{formData:o,fieldErrors:l,submit:t}}};const S=(0,E.Z)(M,[["render",p]]);var k=S,C=o(2260),W=o(2880),_={components:{FormComponent:k,NormalHeading:C.Z,ErrorModal:W.Z},data(){return{isErrorModalVisible:!1,errorMessage:""}},methods:{async submit(e){const r={name:e.name,password:e.password,email:e.email,role:"ROLE_CUSTOMER",phonenumber:"+4322342234",address:{street:e.address,zipcode:e.zip,city:e.city,country:e.country}};console.log("Sending this data:",JSON.stringify(r));try{const e=await fetch("http://localhost:8080/api/v1/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(e.ok){console.log("Registration was successful!");const r=e.json();console.log("Response from backend:",r);const o=e.token;localStorage.setItem("token",o),this.$router.push({path:"/"})}else{if(0===Object.keys(e).length)this.errorMessage="An error occurred. Please try again later. ("+e.status+" "+e.statusText+")";else{const r=e.json();this.errorMessage="Error registering user: "+r.message}this.isErrorModalVisible=!0}}catch(o){console.error("Network error: "+o)}}}};const z=(0,E.Z)(_,[["render",u]]);var Z=z,U={name:"HomeView",components:{Register:Z}};const O=(0,E.Z)(U,[["render",a]]);var R=O}}]);
//# sourceMappingURL=register.b089139a.js.map