"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[845],{7268:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(3396),s=a(7139);const o={class:"text-xl font-bold mb-4 text-teal-700 mt-6"};function i(e,t,a,i,l,d){return(0,r.wg)(),(0,r.iD)("h2",o,(0,s.zw)(a.text),1)}var l={props:{text:String}},d=a(89);const n=(0,d.Z)(l,[["render",i]]);var u=n},8748:function(e,t,a){a.d(t,{Z:function(){return U}});var r=a(3396),s=a(9242),o=a(7139);const i={key:0},l={class:"mb-4"},d=(0,r._)("label",{for:"salutation",class:"block text-sm mb-1"},"Salutation:",-1),n=(0,r._)("option",{value:"Male"},"Male",-1),u=(0,r._)("option",{value:"Female"},"Female",-1),m=(0,r._)("option",{value:"Other"},"Other",-1),c=[n,u,m],h={key:0,class:"text-red-500"},p={key:0,class:"mb-4"},w=(0,r._)("label",{for:"otherInfo",class:"block text-sm mb-1"},"Other Information:",-1),g={key:0,class:"text-red-500"};function f(e,t,a,n,u,m){const f=(0,r.up)("InputField");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>m.submit&&m.submit(...e)),["prevent"]))},[a.specialSalutation?((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",l,[d,(0,r.wy)((0,r._)("select",{id:"salutation","onUpdate:modelValue":t[0]||(t[0]=e=>u.formData.salutation=e),onBlur:t[1]||(t[1]=e=>m.validateField(u.formData.salutation,"salutation")),class:"w-full h-10 px-2 border rounded"},c,544),[[s.bM,u.formData.salutation]]),u.fieldErrors.salutation?((0,r.wg)(),(0,r.iD)("div",h,(0,o.zw)(u.fieldErrors.salutation),1)):(0,r.kq)("",!0)]),"Other"===u.formData.salutation?((0,r.wg)(),(0,r.iD)("div",p,[w,(0,r.wy)((0,r._)("input",{type:"text",id:"otherInfo",onBlur:t[2]||(t[2]=e=>m.validateField(u.formData.otherInfo,"otherInfo")),"onUpdate:modelValue":t[3]||(t[3]=e=>u.formData.otherInfo=e),maxlength:"30",class:"w-full h-10 px-2 border rounded"},null,544),[[s.nr,u.formData.otherInfo]]),u.fieldErrors.otherInfo?((0,r.wg)(),(0,r.iD)("div",g,(0,o.zw)(u.fieldErrors.otherInfo),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.formFields,(e=>((0,r.wg)(),(0,r.j4)(f,{key:e.id,id:e.id,type:e.type,label:e.label,placeholder:e.placeholder,modelValue:u.formData[e.id],"onUpdate:modelValue":t=>u.formData[e.id]=t,validateField:t=>m.validateField(t,e.id),error:u.fieldErrors[e.id],options:e.options},null,8,["id","type","label","placeholder","modelValue","onUpdate:modelValue","validateField","error","options"])))),128)),(0,r.WI)(e.$slots,"default")],32)}const b={class:"mb-4"},y=["for"],v=["id","value"],P=["value"],k=["type","id","value","placeholder"],x={key:2,class:"text-red-500"};function D(e,t,a,s,i,l){return(0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("label",{for:a.id,class:"block text-sm mb-1"},(0,o.zw)(a.label)+":",9,y),"select"===a.type?((0,r.wg)(),(0,r.iD)("select",{key:0,id:a.id,onBlur:t[0]||(t[0]=(...e)=>l.handleBlur&&l.handleBlur(...e)),value:a.modelValue,onChange:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value)),class:"w-full h-10 px-2 border rounded"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.options,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.label),9,P)))),128))],40,v)):((0,r.wg)(),(0,r.iD)("input",{key:1,type:a.type,id:a.id,onBlur:t[2]||(t[2]=(...e)=>l.handleBlur&&l.handleBlur(...e)),value:a.modelValue,onInput:t[3]||(t[3]=t=>e.$emit("update:modelValue",t.target.value)),placeholder:a.placeholder,class:"w-full h-10 px-2 border rounded"},null,40,k)),a.error?((0,r.wg)(),(0,r.iD)("div",x,(0,o.zw)(a.error),1)):(0,r.kq)("",!0)])}var C={props:{id:String,modelValue:String,label:String,type:String,placeholder:String,validateField:Function,error:String,options:Array},methods:{handleBlur(e){const t=e.target.value;this.$emit("update:modelValue",t),this.validateField&&this.validateField(t)}}},S=a(89);const _=(0,S.Z)(C,[["render",D]]);var E=_,V={components:{InputField:E},props:{formFields:{type:Array,required:!0},formSchema:{type:Object,required:!0},initialFormData:{type:Object,required:!0},specialSalutation:{type:Boolean,required:!0}},data(){return{formData:this.initialFormData,fieldErrors:{}}},methods:{validateField(e,t){console.log("Field: "+t+", Value: "+e),this.formSchema.validateAt(t,{...this.formData,[t]:e}).then((()=>{this.fieldErrors[t]=null,"password"===t&&this.validateField(this.formData.password2,"password2")})).catch((e=>{"password2"!==t||this.formData.password2?this.fieldErrors[t]=e.message:this.fieldErrors[t]=null}))},submit(){console.log("FormData: "+JSON.stringify(this.formData)),this.formSchema.validate(this.formData,{abortEarly:!1}).then((()=>{this.$emit("formSubmit",this.formData)})).catch((e=>{e.inner.forEach((e=>{console.log("Validation failed! "+e.message),this.fieldErrors[e.path]=e.message}))}))}}};const F=(0,S.Z)(V,[["render",f]]);var U=F},4991:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var r=a(3396),s=a(7139);const o={class:"min-h-screen bg-gray-100 py-10 px-5 flex flex-col items-center"},i={class:"bg-white p-8 rounded-lg shadow-md w-full max-w-2xl mb-10"},l={key:0},d={class:"text-xl mb-4"},n={key:0},u={class:"text-gray-600 mb-4"},m={class:"text-gray-600 mb-4"},c={class:"text-gray-600 mb-4"},h={class:"text-gray-600 mb-4"},p={class:"text-gray-600 mb-4"},w={class:"text-gray-600 mb-4"},g={key:1},f={key:1},b={class:"text-gray-600 mb-4"};function y(e,t,a,y,v,P){const k=(0,r.up)("NormalHeading"),x=(0,r.up)("CustomButton"),D=(0,r.up)("FormComponent"),C=(0,r.up)("router-link"),S=(0,r.up)("ChangePasswordModal"),_=(0,r.up)("ErrorModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",o,[(0,r._)("div",i,[(0,r.Wm)(k,{text:"Your Profile"}),this.store.isLoggedIn&&v.user?((0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("h2",d,"Welcome, "+(0,s.zw)(v.user.name),1),v.isEditing?((0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(D,{"initial-form-data":v.editableUserData,"form-fields":v.profileFormFields,"form-schema":v.profileValidationSchema,"special-salutation":!1,onFormSubmit:P.updateProfile},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{type:"submit",customButtonStyle:"mt-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("Save Changes")])),_:1})])),_:1},8,["initial-form-data","form-fields","form-schema","onFormSubmit"]),(0,r.Wm)(x,{onClicked:t[1]||(t[1]=e=>P.cancel()),customButtonStyle:"mt-4 bg-gray-300 text-black p-2 rounded hover:bg-gray-400"},{default:(0,r.w5)((()=>[(0,r.Uk)("Cancel")])),_:1})])):((0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("p",u,"Salutation: "+(0,s.zw)(v.user.salutation),1),(0,r._)("p",m,"Email: "+(0,s.zw)(v.user.email),1),(0,r._)("p",c,"Street: "+(0,s.zw)(v.user.address.street),1),(0,r._)("p",h,"Zip: "+(0,s.zw)(v.user.address.zipcode),1),(0,r._)("p",p,"City: "+(0,s.zw)(v.user.address.city),1),(0,r._)("p",w,"Country: "+(0,s.zw)(v.user.address.country),1),(0,r.Wm)(x,{onClicked:t[0]||(t[0]=e=>P.enableEditing()),customButtonStyle:"mt-4 mr-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("Edit Profile")])),_:1}),(0,r.Wm)(x,{onClicked:P.showChangePasswordModal,customButtonStyle:"mt-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("Change Password")])),_:1},8,["onClicked"])]))])):((0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("p",b,[(0,r.Uk)(" Please "),(0,r.Wm)(C,{to:"/login",class:"text-teal-700"},{default:(0,r.w5)((()=>[(0,r.Uk)("log in")])),_:1}),(0,r.Uk)(" or "),(0,r.Wm)(C,{to:"/register",class:"text-teal-700"},{default:(0,r.w5)((()=>[(0,r.Uk)("register")])),_:1}),(0,r.Uk)(" to view your profile. ")])]))])]),(0,r.Wm)(S,{isVisible:v.isChangePasswordModalVisible,"onUpdate:isVisible":t[2]||(t[2]=e=>v.isChangePasswordModalVisible=e),onChangePassword:P.onPasswordChanged},null,8,["isVisible","onChangePassword"]),(0,r.Wm)(_,{isVisible:v.isErrorModalVisible,errorMessage:v.errorMessage,"onUpdate:isVisible":t[3]||(t[3]=e=>v.isErrorModalVisible=e)},null,8,["isVisible","errorMessage"])],64)}a(7658);var v=a(9427),P=a(2260),k=a(432),x=a(9242);const D={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center"},C={class:"bg-white p-4 rounded shadow-md w-96"},S={key:0,class:"text-red-500"};function _(e,t,a,o,i,l){const d=(0,r.up)("SubHeading"),n=(0,r.up)("CustomButton");return a.isVisible?((0,r.wg)(),(0,r.iD)("div",D,[(0,r._)("div",C,[(0,r.Wm)(d,{text:"Change Password"}),(0,r.wy)((0,r._)("input",{type:"password",id:"newPassword",placeholder:"New Password","onUpdate:modelValue":t[0]||(t[0]=e=>i.newPassword=e),class:"w-full h-10 px-2 border rounded",required:""},null,512),[[x.nr,i.newPassword]]),(0,r.wy)((0,r._)("input",{type:"password",id:"confirmPassword",placeholder:"Confirm New Password","onUpdate:modelValue":t[1]||(t[1]=e=>i.confirmPassword=e),class:"w-full h-10 px-2 mt-4 border rounded",required:""},null,512),[[x.nr,i.confirmPassword]]),i.error?((0,r.wg)(),(0,r.iD)("div",S,(0,s.zw)(i.error),1)):(0,r.kq)("",!0),(0,r.Wm)(n,{onClicked:l.changePassword,customButtonStyle:"mt-4 mr-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("Submit")])),_:1},8,["onClicked"]),(0,r.Wm)(n,{onClicked:l.closeModal,customButtonStyle:"mt-4 bg-gray-300 text-black p-2 rounded hover:bg-gray-400"},{default:(0,r.w5)((()=>[(0,r.Uk)("Cancel")])),_:1},8,["onClicked"])])])):(0,r.kq)("",!0)}var E=a(7268),V={props:{isVisible:{type:Boolean,required:!0}},components:{CustomButton:v.Z,SubHeading:E.Z},data(){return{newPassword:"",confirmPassword:"",error:""}},methods:{changePassword(){const e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{12,}$/;!e.test(this.newPassword)||this.newPassword.length<12?this.error="Password must be 12 characters long and must include uppercase, lowercase, numbers, and symbols":this.newPassword!==this.confirmPassword?(this.error="Passwords do not match!",console.log("PW1: "+this.newPassword+", PW2: "+this.confirmPassword)):(this.$emit("changePassword",this.newPassword),this.closeModal())},closeModal(){this.newPassword="",this.confirmPassword="",this.error="",this.$emit("update:isVisible",!1)}}},F=a(89);const U=(0,F.Z)(V,[["render",_]]);var q=U,M=a(8748),z=a(4460),Z=a(7629),B={data(){return{user:null,isEditing:!1,isErrorModalVisible:!1,isChangePasswordModalVisible:!1,errorMessage:"",store:(0,z.V)(),profileFormFields:[{id:"name",type:"text",label:"Name",placeholder:"Your Name"},{id:"salutation",type:"text",label:"Salutation",placeholder:"Your Salutation"},{id:"address",type:"text",label:"Address",placeholder:"Your Address"},{id:"city",type:"text",label:"City",placeholder:"Your City"},{id:"zip",type:"text",label:"Zip",placeholder:"Your Zip"},{id:"country",type:"select",label:"Country",placeholder:"Your Country",options:[{label:"Austria (AT)",value:"AT"},{label:"Germany (DE)",value:"DE"},{label:"Switzerland (CH)",value:"CH"},{label:"United States (US)",value:"US"},{label:"Canada (CA)",value:"CA"},{label:"United Kingdom (UK)",value:"UK"},{label:"France (FR)",value:"FR"},{label:"Spain (ES)",value:"ES"},{label:"Japan (JP)",value:"JP"}]},{id:"email",type:"text",label:"Email",placeholder:"Your Email"}],profileValidationSchema:(0,Z.Ry)().shape({name:(0,Z.Z_)().required("Name is required"),salutation:(0,Z.Z_)().required("Salutation is required"),address:(0,Z.Z_)().required("Address is required"),city:(0,Z.Z_)().required("City is required"),zip:(0,Z.Z_)().required("ZIP code is required"),country:(0,Z.Z_)().required("Country is required"),email:(0,Z.Z_)().email("Invalid email format").required("Email is required")}),editableUserData:{}}},components:{NormalHeading:P.Z,CustomButton:v.Z,ErrorModal:k.Z,FormComponent:M.Z,ChangePasswordModal:q},methods:{async updateProfile(e){const t=this.store.getUserId,a={name:e.name,email:e.email,salutation:e.salutation,address:{street:e.address,zipcode:e.zip,city:e.city,country:e.country}};await this.store.updateProfileData(t,a);let r=this.store.checkforProfileError();r&&(this.errorMessage=r,this.isErrorModalVisible=!0),this.isEditing=!1,e.name!==this.user.name||e.email!==this.user.email?this.logout():this.user=this.store.getProfileData},enableEditing(){this.isEditing=!0,this.editableUserData={name:this.user.name,salutation:this.user.salutation,email:this.user.email,address:this.user.address.street,city:this.user.address.city,zip:this.user.address.zipcode,country:this.user.address.country}},cancel(){this.isEditing=!1,this.user=this.store.getProfileData},showChangePasswordModal(){this.isChangePasswordModalVisible=!0},async onPasswordChanged(e){const t=this.store.getUserId,a={name:this.user.name,email:this.user.email,salutation:this.user.salutation,address:{street:this.user.address.street,zipcode:this.user.address.zip,city:this.user.address.city,country:this.user.address.country},password:e};await this.store.updateProfileData(t,a);let r=this.store.checkforProfileError();r&&(this.errorMessage=r,this.isErrorModalVisible=!0),console.log("Password changed successfully")},logout(){localStorage.removeItem("token"),this.store.logout(),this.$router.push("/")}},async mounted(){this.store.isLoggedIn&&(await this.store.fetchProfileData(),this.user=this.store.getProfileData)}};const I=(0,F.Z)(B,[["render",y]]);var W=I}}]);
//# sourceMappingURL=profile.47aa44b7.js.map