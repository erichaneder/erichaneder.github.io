"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[845],{7268:function(e,t,r){r.d(t,{Z:function(){return u}});var i=r(3396),s=r(7139);const a={class:"text-xl font-bold mb-4 text-teal-700 mt-6"};function o(e,t,r,o,l,d){return(0,i.wg)(),(0,i.iD)("h2",a,(0,s.zw)(r.text),1)}var l={props:{text:String}},d=r(89);const n=(0,d.Z)(l,[["render",o]]);var u=n},6685:function(e,t,r){r.d(t,{Z:function(){return E}});var i=r(3396),s=r(9242),a=r(7139);const o={key:0},l={class:"mb-4"},d=(0,i._)("label",{for:"salutation",class:"block text-sm mb-1"},"Salutation:",-1),n=(0,i._)("option",{value:"Male"},"Male",-1),u=(0,i._)("option",{value:"Female"},"Female",-1),c=(0,i._)("option",{value:"Other"},"Other",-1),m=[n,u,c],h={key:0,class:"text-red-500"},p={key:0,class:"mb-4"},w=(0,i._)("label",{for:"otherInfo",class:"block text-sm mb-1"},"Other Information:",-1),f={key:0,class:"text-red-500"};function g(e,t,r,n,u,c){const g=(0,i.up)("InputField");return(0,i.wg)(),(0,i.iD)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>c.submit&&c.submit(...e)),["prevent"]))},[r.specialSalutation?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",l,[d,(0,i.wy)((0,i._)("select",{id:"salutation","onUpdate:modelValue":t[0]||(t[0]=e=>u.formData.salutation=e),onBlur:t[1]||(t[1]=e=>c.validateField(u.formData.salutation,"salutation")),class:"w-full h-10 px-2 border rounded"},m,544),[[s.bM,u.formData.salutation]]),u.fieldErrors.salutation?((0,i.wg)(),(0,i.iD)("div",h,(0,a.zw)(u.fieldErrors.salutation),1)):(0,i.kq)("",!0)]),"Other"===u.formData.salutation?((0,i.wg)(),(0,i.iD)("div",p,[w,(0,i.wy)((0,i._)("input",{type:"text",id:"otherInfo",onBlur:t[2]||(t[2]=e=>c.validateField(u.formData.otherInfo,"otherInfo")),"onUpdate:modelValue":t[3]||(t[3]=e=>u.formData.otherInfo=e),maxlength:"30",class:"w-full h-10 px-2 border rounded"},null,544),[[s.nr,u.formData.otherInfo]]),u.fieldErrors.otherInfo?((0,i.wg)(),(0,i.iD)("div",f,(0,a.zw)(u.fieldErrors.otherInfo),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.formFields,(e=>((0,i.wg)(),(0,i.j4)(g,{key:e.id,id:e.id,type:e.type,label:e.label,placeholder:e.placeholder,modelValue:u.formData[e.id],"onUpdate:modelValue":t=>u.formData[e.id]=t,validateField:t=>c.validateField(t,e.id),error:u.fieldErrors[e.id],options:e.options},null,8,["id","type","label","placeholder","modelValue","onUpdate:modelValue","validateField","error","options"])))),128)),(0,i.WI)(e.$slots,"default")],32)}const b={class:"mb-4"},y=["for"],P=["id","value"],v=["value"],k=["type","id","value","placeholder"],x={key:2,class:"mt-1 bg-teal-700 text-white text-xs p-2 rounded shadow-lg"},C={key:3,class:"text-red-500"};function D(e,t,r,s,o,l){return(0,i.wg)(),(0,i.iD)("div",b,[(0,i._)("label",{for:r.id,class:"block text-sm mb-1"},(0,a.zw)(r.label)+":",9,y),"select"===r.type?((0,i.wg)(),(0,i.iD)("select",{key:0,id:r.id,onBlur:t[0]||(t[0]=(...e)=>l.handleBlur&&l.handleBlur(...e)),value:r.modelValue,onChange:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value)),class:"w-full h-10 px-2 border rounded"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.options,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.value,value:e.value},(0,a.zw)(e.label),9,v)))),128))],40,P)):((0,i.wg)(),(0,i.iD)("input",{key:1,type:r.type,id:r.id,onBlur:t[2]||(t[2]=(...e)=>l.handleBlur&&l.handleBlur(...e)),onFocus:t[3]||(t[3]=e=>o.showToolTip=!0),value:r.modelValue,onInput:t[4]||(t[4]=t=>e.$emit("update:modelValue",t.target.value)),placeholder:r.placeholder,class:"w-full h-10 px-2 border rounded"},null,40,k)),"password"===r.type&&o.showToolTip?((0,i.wg)(),(0,i.iD)("div",x," Password must have at least 12 characters, 1 upper/lower case letter, 1 number and 1 symbol ")):(0,i.kq)("",!0),r.error?((0,i.wg)(),(0,i.iD)("div",C,(0,a.zw)(r.error),1)):(0,i.kq)("",!0)])}var S={props:{id:String,modelValue:String,label:String,type:String,placeholder:String,validateField:Function,error:String,options:Array},data(){return{showToolTip:!1}},methods:{handleBlur(e){this.showToolTip=!1;const t=e.target.value;this.$emit("update:modelValue",t),this.validateField&&this.validateField(t)}}},V=r(89);const _=(0,V.Z)(S,[["render",D]]);var F=_,M={components:{InputField:F},props:{formFields:{type:Array,required:!0},formSchema:{type:Object,required:!0},initialFormData:{type:Object,required:!0},specialSalutation:{type:Boolean,required:!0}},data(){return{formData:this.initialFormData,fieldErrors:{}}},methods:{validateField(e,t){console.log("Field: "+t+", Value: "+e),this.formSchema.validateAt(t,{...this.formData,[t]:e}).then((()=>{this.fieldErrors[t]=null,"password"===t&&this.validateField(this.formData.password2,"password2")})).catch((e=>{"password2"!==t||this.formData.password2?this.fieldErrors[t]=e.message:this.fieldErrors[t]=null}))},submit(){console.log("FormData: "+JSON.stringify(this.formData)),this.formSchema.validate(this.formData,{abortEarly:!1}).then((()=>{this.$emit("formSubmit",this.formData)})).catch((e=>{e.inner.forEach((e=>{console.log("Validation failed! "+e.message),this.fieldErrors[e.path]=e.message}))}))}}};const U=(0,V.Z)(M,[["render",g]]);var E=U},154:function(e,t,r){r.r(t),r.d(t,{default:function(){return K}});var i=r(3396),s=r(7139);const a={class:"min-h-screen bg-gray-100 py-10 px-5 flex flex-col items-center"},o={class:"bg-white p-8 rounded-lg shadow-md w-full max-w-2xl mb-10"},l={key:0},d={class:"flex flex-col items-center space-x-4 mb-4"},n={class:"relative inline-block"},u=["src"],c={class:"text-xl"},m={key:0},h={class:"text-gray-600 mb-4"},p={class:"text-gray-600 mb-4"},w={class:"text-gray-600 mb-4"},f={class:"text-gray-600 mb-4"},g={class:"text-gray-600 mb-4"},b={class:"text-gray-600 mb-4"},y={key:1},P={key:1},v={class:"text-gray-600 mb-4"};function k(e,t,r,k,x,C){const D=(0,i.up)("NormalHeading"),S=(0,i.up)("PencilIcon"),V=(0,i.up)("CustomButton"),_=(0,i.up)("FormComponent"),F=(0,i.up)("router-link"),M=(0,i.up)("ChangePasswordModal"),U=(0,i.up)("ProfilePictureModal"),E=(0,i.up)("ErrorModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",a,[(0,i._)("div",o,[(0,i.Wm)(D,{text:"Your Profile"}),this.store.isLoggedIn&&x.user?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",d,[(0,i._)("div",n,[(0,i._)("img",{src:x.user.profilePicture,alt:"Profile Picture",class:"w-16 h-16 rounded-full border border-gray-300"},null,8,u),(0,i._)("div",{class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 hover:opacity-100 cursor-pointer",onClick:t[0]||(t[0]=(...e)=>C.showProfilePictureModal&&C.showProfilePictureModal(...e))},[(0,i.Wm)(S,{class:"h-6 w-6 text-white"})])]),(0,i._)("h2",c,"Welcome, "+(0,s.zw)(x.user.name),1)]),x.isEditing?((0,i.wg)(),(0,i.iD)("div",y,[(0,i.Wm)(_,{"initial-form-data":x.editableUserData,"form-fields":x.profileFormFields,"form-schema":x.profileValidationSchema,"special-salutation":!1,onFormSubmit:C.updateProfile},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{type:"submit",customButtonStyle:"mt-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("Save Changes")])),_:1})])),_:1},8,["initial-form-data","form-fields","form-schema","onFormSubmit"]),(0,i.Wm)(V,{onClicked:t[2]||(t[2]=e=>C.cancel()),customButtonStyle:"mt-4 bg-gray-300 text-black p-2 rounded hover:bg-gray-400"},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:1})])):((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("p",h,"Salutation: "+(0,s.zw)(x.user.salutation),1),(0,i._)("p",p,"Email: "+(0,s.zw)(x.user.email),1),(0,i._)("p",w,"Street: "+(0,s.zw)(x.user.address.street),1),(0,i._)("p",f,"Zip: "+(0,s.zw)(x.user.address.zipcode),1),(0,i._)("p",g,"City: "+(0,s.zw)(x.user.address.city),1),(0,i._)("p",b,"Country: "+(0,s.zw)(x.user.address.country),1),(0,i.Wm)(V,{onClicked:t[1]||(t[1]=e=>C.enableEditing()),customButtonStyle:"mt-4 mr-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit Profile")])),_:1}),(0,i.Wm)(V,{onClicked:C.showChangePasswordModal,customButtonStyle:"mt-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("Change Password")])),_:1},8,["onClicked"])]))])):((0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("p",v,[(0,i.Uk)(" Please "),(0,i.Wm)(F,{to:"/login",class:"text-teal-700"},{default:(0,i.w5)((()=>[(0,i.Uk)("log in")])),_:1}),(0,i.Uk)(" or "),(0,i.Wm)(F,{to:"/register",class:"text-teal-700"},{default:(0,i.w5)((()=>[(0,i.Uk)("register")])),_:1}),(0,i.Uk)(" to view your profile. ")])]))])]),(0,i.Wm)(M,{isVisible:x.isChangePasswordModalVisible,"onUpdate:isVisible":t[3]||(t[3]=e=>x.isChangePasswordModalVisible=e),onChangePassword:C.onPasswordChanged},null,8,["isVisible","onChangePassword"]),(0,i.Wm)(U,{isVisible:x.isProfilePictureModalVisible,"onUpdate:isVisible":t[4]||(t[4]=e=>x.isProfilePictureModalVisible=e),onUpdateProfilePicture:C.onProfilePictureChanged},null,8,["isVisible","onUpdateProfilePicture"]),(0,i.Wm)(E,{isVisible:x.isErrorModalVisible,errorMessage:x.errorMessage,"onUpdate:isVisible":t[5]||(t[5]=e=>x.isErrorModalVisible=e)},null,8,["isVisible","errorMessage"])],64)}r(7658);var x=r(9427),C=r(2260),D=r(432),S=r(9242);const V={key:0,class:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center"},_={class:"bg-white p-4 rounded shadow-md w-96"},F={key:0,class:"text-red-500"};function M(e,t,r,a,o,l){const d=(0,i.up)("SubHeading"),n=(0,i.up)("CustomButton");return r.isVisible?((0,i.wg)(),(0,i.iD)("div",V,[(0,i._)("div",_,[(0,i.Wm)(d,{text:"Change Password"}),(0,i.wy)((0,i._)("input",{type:"password",id:"newPassword",placeholder:"New Password","onUpdate:modelValue":t[0]||(t[0]=e=>o.newPassword=e),class:"w-full h-10 px-2 border rounded",required:""},null,512),[[S.nr,o.newPassword]]),(0,i.wy)((0,i._)("input",{type:"password",id:"confirmPassword",placeholder:"Confirm New Password","onUpdate:modelValue":t[1]||(t[1]=e=>o.confirmPassword=e),class:"w-full h-10 px-2 mt-4 border rounded",required:""},null,512),[[S.nr,o.confirmPassword]]),o.error?((0,i.wg)(),(0,i.iD)("div",F,(0,s.zw)(o.error),1)):(0,i.kq)("",!0),(0,i.Wm)(n,{onClicked:l.changePassword,customButtonStyle:"mt-4 mr-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("Submit")])),_:1},8,["onClicked"]),(0,i.Wm)(n,{onClicked:l.closeModal,customButtonStyle:"mt-4 bg-gray-300 text-black p-2 rounded hover:bg-gray-400"},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:1},8,["onClicked"])])])):(0,i.kq)("",!0)}var U=r(7268),E={props:{isVisible:{type:Boolean,required:!0}},components:{CustomButton:x.Z,SubHeading:U.Z},data(){return{newPassword:"",confirmPassword:"",error:""}},methods:{changePassword(){const e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{12,}$/;!e.test(this.newPassword)||this.newPassword.length<12?this.error="Password must be 12 characters long and must include uppercase, lowercase, numbers, and symbols":this.newPassword!==this.confirmPassword?(this.error="Passwords do not match!",console.log("PW1: "+this.newPassword+", PW2: "+this.confirmPassword)):(this.$emit("changePassword",this.newPassword),this.closeModal())},closeModal(){this.newPassword="",this.confirmPassword="",this.error="",this.$emit("update:isVisible",!1)}}},Z=r(89);const q=(0,Z.Z)(E,[["render",M]]);var z=q;const B={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"},I={class:"bg-white p-4 rounded shadow-md w-96"};function W(e,t,r,s,a,o){const l=(0,i.up)("SubHeading"),d=(0,i.up)("CustomButton");return r.isVisible?((0,i.wg)(),(0,i.iD)("div",B,[(0,i._)("div",I,[(0,i.Wm)(l,{text:"Update Profile Picture"}),(0,i._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>o.onFileSelected&&o.onFileSelected(...e))},null,32),(0,i.Wm)(d,{onClicked:o.updateProfilePicture,customButtonStyle:"mt-4 mr-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,i.w5)((()=>[(0,i.Uk)("Update")])),_:1},8,["onClicked"]),(0,i.Wm)(d,{onClicked:o.cancel,customButtonStyle:"mt-4 bg-gray-300 text-black p-2 rounded hover:bg-gray-400"},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:1},8,["onClicked"])])])):(0,i.kq)("",!0)}var A={props:["isVisible"],data(){return{selectedFile:null}},components:{CustomButton:x.Z,SubHeading:U.Z},methods:{onFileSelected(e){const t=e.target.files[0],r=new FileReader;r.readAsDataURL(t),r.onload=e=>{this.selectedFile=e.target.result}},updateProfilePicture(){this.selectedFile&&(console.log("New pic: "+this.selectedFile),this.$emit("updateProfilePicture",this.selectedFile)),this.closeModal()},cancel(){this.closeModal()},closeModal(){this.selectedFile=null,this.$emit("update:isVisible",!1)}}};const $=(0,Z.Z)(A,[["render",W]]);var H=$,Y=r(6685),T=r(4082),N=r(4460),j=r(7629),O={data(){return{user:null,isEditing:!1,isErrorModalVisible:!1,isChangePasswordModalVisible:!1,isProfilePictureModalVisible:!1,errorMessage:"",store:(0,N.V)(),profileFormFields:[{id:"name",type:"text",label:"Name",placeholder:"Your Name"},{id:"salutation",type:"text",label:"Salutation",placeholder:"Your Salutation"},{id:"address",type:"text",label:"Address",placeholder:"Your Address"},{id:"city",type:"text",label:"City",placeholder:"Your City"},{id:"zip",type:"text",label:"Zip",placeholder:"Your Zip"},{id:"country",type:"select",label:"Country",placeholder:"Your Country",options:[{label:"Austria (AT)",value:"AT"},{label:"Germany (DE)",value:"DE"},{label:"Switzerland (CH)",value:"CH"},{label:"United States (US)",value:"US"},{label:"Canada (CA)",value:"CA"},{label:"United Kingdom (UK)",value:"UK"},{label:"France (FR)",value:"FR"},{label:"Spain (ES)",value:"ES"},{label:"Japan (JP)",value:"JP"}]},{id:"email",type:"text",label:"Email",placeholder:"Your Email"}],profileValidationSchema:(0,j.Ry)().shape({name:(0,j.Z_)().required("Name is required"),salutation:(0,j.Z_)().required("Salutation is required"),address:(0,j.Z_)().required("Address is required"),city:(0,j.Z_)().required("City is required"),zip:(0,j.Z_)().required("ZIP code is required"),country:(0,j.Z_)().required("Country is required"),email:(0,j.Z_)().email("Invalid email format").required("Email is required")}),editableUserData:{}}},components:{NormalHeading:C.Z,CustomButton:x.Z,ErrorModal:D.Z,FormComponent:Y.Z,ChangePasswordModal:z,ProfilePictureModal:H,PencilIcon:T.Z},methods:{async updateProfile(e){const t=this.store.getUserId,r={name:e.name,email:e.email,salutation:e.salutation,address:{street:e.address,zipcode:e.zip,city:e.city,country:e.country}};await this.store.updateProfileData(t,r);let i=this.store.checkforProfileError();i&&(this.errorMessage=i,this.isErrorModalVisible=!0),this.isEditing=!1,e.name!==this.user.name||e.email!==this.user.email?this.logout():this.user=this.store.getProfileData},enableEditing(){this.isEditing=!0,this.editableUserData={name:this.user.name,salutation:this.user.salutation,email:this.user.email,address:this.user.address.street,city:this.user.address.city,zip:this.user.address.zipcode,country:this.user.address.country}},cancel(){this.isEditing=!1,this.user=this.store.getProfileData},showChangePasswordModal(){this.isChangePasswordModalVisible=!0},async onPasswordChanged(e){const t=this.store.getUserId,r={name:this.user.name,email:this.user.email,salutation:this.user.salutation,address:{street:this.user.address.street,zipcode:this.user.address.zip,city:this.user.address.city,country:this.user.address.country},password:e};await this.store.updateProfileData(t,r);let i=this.store.checkforProfileError();i&&(this.errorMessage=i,this.isErrorModalVisible=!0),console.log("Password changed successfully")},showProfilePictureModal(){this.isProfilePictureModalVisible=!0},async onProfilePictureChanged(e){const t=this.store.getUserId,r={profilePicture:e};await this.store.updateProfileData(t,r),this.isProfilePictureModalVisible=!1,this.user.profilePicture=e},logout(){localStorage.removeItem("token"),this.store.logout(),this.$router.push("/")}},async mounted(){this.store.isLoggedIn&&(await this.store.fetchProfileData(),this.user=this.store.getProfileData)}};const L=(0,Z.Z)(O,[["render",k]]);var K=L},4082:function(e,t,r){r.d(t,{Z:function(){return s}});var i=r(3396);function s(e,t){return(0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[(0,i._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})])}}}]);
//# sourceMappingURL=profile.5687fb47.js.map