"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[238],{2484:function(e,r,o){o.r(r),o.d(r,{default:function(){return B}});var s=o(3396),t=o(9242),i=o(7139);const a={class:"min-h-screen flex flex-col items-center p-5 mt-12"},l={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-8",role:"alert"},d=(0,s._)("strong",{class:"font-bold"},"Success!",-1),n=(0,s._)("span",{class:"block sm:inline"},"Product successfully added!",-1),c=[d,n],u={class:"bg-white p-8 rounded-lg shadow-md w-96"},m={class:"mb-4"},p=(0,s._)("label",{for:"productName",class:"block text-lg mb-1 text-gray-600"},"Product Name:",-1),g={key:0,class:"text-red-500"},f={class:"mb-4"},h=(0,s._)("label",{for:"productDescription",class:"block text-lg mb-1 text-gray-600"},"Description:",-1),b={key:0,class:"text-red-500"},v={class:"mb-4"},w=(0,s._)("label",{for:"productPrice",class:"block text-lg mb-1 text-gray-600"},"Price:",-1),y={key:0,class:"text-red-500"},x={class:"mb-4"},P=(0,s._)("label",{for:"productImage",class:"block text-lg mb-1 text-gray-600"},"Product Image:",-1),_={key:0,class:"text-red-500"};function k(e,r,o,d,n,k){const M=(0,s.up)("NormalHeading"),q=(0,s.up)("CustomButton"),V=(0,s.up)("ErrorModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[n.showAlert?((0,s.wg)(),(0,s.iD)("div",l,c)):(0,s.kq)("",!0),(0,s._)("div",u,[(0,s.Wm)(M,{text:"Add Product"}),(0,s._)("form",{onSubmit:r[7]||(r[7]=(0,t.iM)(((...e)=>k.addProduct&&k.addProduct(...e)),["prevent"]))},[(0,s._)("div",m,[p,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>n.form.values.name=e),onBlur:r[1]||(r[1]=e=>k.validate("name")),type:"text",id:"productName",placeholder:"Product name",class:"w-full h-10 px-2 border rounded"},null,544),[[t.nr,n.form.values.name]]),n.form.errors.name?((0,s.wg)(),(0,s.iD)("p",g,(0,i.zw)(n.form.errors.name),1)):(0,s.kq)("",!0)]),(0,s._)("div",f,[h,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":r[2]||(r[2]=e=>n.form.values.description=e),onBlur:r[3]||(r[3]=e=>k.validate("description")),id:"productDescription",placeholder:"Product description",class:"w-full h-32 px-2 py-2 border rounded"},null,544),[[t.nr,n.form.values.description]]),n.form.errors.description?((0,s.wg)(),(0,s.iD)("p",b,(0,i.zw)(n.form.errors.description),1)):(0,s.kq)("",!0)]),(0,s._)("div",v,[w,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":r[4]||(r[4]=e=>n.form.values.price=e),onBlur:r[5]||(r[5]=e=>k.validate("price")),type:"number",id:"productPrice",step:"0.01",placeholder:"Product price",class:"w-full h-10 px-2 border rounded"},null,544),[[t.nr,n.form.values.price]]),n.form.errors.price?((0,s.wg)(),(0,s.iD)("p",y,(0,i.zw)(n.form.errors.price),1)):(0,s.kq)("",!0)]),(0,s._)("div",x,[P,(0,s._)("input",{type:"file",ref:"productImage",id:"productImage",class:"w-full p-2 border rounded",onChange:r[6]||(r[6]=(...e)=>k.onImageChange&&k.onImageChange(...e))},null,544),n.form.errors.image?((0,s.wg)(),(0,s.iD)("p",_,(0,i.zw)(n.form.errors.image),1)):(0,s.kq)("",!0)]),(0,s.Wm)(q,{type:"submit",customButtonStyle:"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("Add Product")])),_:1})],32)])]),(0,s.Wm)(V,{isVisible:n.isErrorModalVisible,errorMessage:n.errorMessage,"onUpdate:isVisible":r[8]||(r[8]=e=>n.isErrorModalVisible=e)},null,8,["isVisible","errorMessage"])],64)}var M=o(9427),q=o(2260),V=o(432),E=o(4460),I=o(7629);const A=(0,I.Ry)().shape({name:(0,I.Z_)().required("Product name is required"),description:(0,I.Z_)().required("Product description is required"),price:(0,I.Rx)().typeError("Price must be a number").min(0,"Price must be a positive number").required("Price is required"),image:(0,I.Z_)().required("Image is required")});var D={name:"AdminAddProduct",components:{NormalHeading:q.Z,CustomButton:M.Z,ErrorModal:V.Z},data(){return{form:{values:{name:"",description:"",price:0,image:null},errors:{name:"",description:"",price:"",image:""}},showAlert:!1,isErrorModalVisible:!1,errorMessage:"",store:(0,E.V)()}},methods:{async addProduct(){A.validate(this.form.values,{abortEarly:!1}).then((async()=>{this.form.errors={name:"",description:"",price:"",image:""};const e={id:this.form.values.id,name:this.form.values.name,price:this.form.values.price,description:this.form.values.description,image:this.form.values.image},r=await this.store.addProduct(e);r?(this.showAlert=!0,setTimeout(this.resetForm,2e3)):(this.errorMessage="Error adding product!",this.isErrorModalVisible=!0)})).catch((e=>{console.log(e),this.errorMessage="Error adding product: "+e,this.isErrorModalVisible=!0}))},validate(e){A.validateAt(e,this.form.values).then((()=>{this.form.errors[e]=""})).catch((r=>{this.form.errors[e]=r.message}))},resetForm(){this.form.values={name:"",description:"",price:0,image:null},this.form.errors={name:"",description:"",price:"",image:""},this.showAlert=!1,this.$refs.productImage&&(this.$refs.productImage.value="")},onImageChange(e){console.log("Image change: "+e),this.form.values.image="blue1.webp"}}},C=o(89);const Z=(0,C.Z)(D,[["render",k]]);var B=Z}}]);
//# sourceMappingURL=addProduct.8eee563d.js.map