"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[378],{6685:function(e,t,a){a.d(t,{Z:function(){return C}});var r=a(3396),l=a(9242),i=a(7139);const s={key:0},o={class:"mb-4"},d=(0,r._)("label",{for:"salutation",class:"block text-sm mb-1"},"Salutation:",-1),n=(0,r._)("option",{value:"Male"},"Male",-1),u=(0,r._)("option",{value:"Female"},"Female",-1),m=(0,r._)("option",{value:"Other"},"Other",-1),c=[n,u,m],p={key:0,class:"text-red-500"},h={key:0,class:"mb-4"},f=(0,r._)("label",{for:"otherInfo",class:"block text-sm mb-1"},"Other Information:",-1),y={key:0,class:"text-red-500"};function g(e,t,a,n,u,m){const g=(0,r.up)("InputField");return(0,r.wg)(),(0,r.iD)("form",{onSubmit:t[4]||(t[4]=(0,l.iM)(((...e)=>m.submit&&m.submit(...e)),["prevent"]))},[a.specialSalutation?((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",o,[d,(0,r.wy)((0,r._)("select",{id:"salutation","onUpdate:modelValue":t[0]||(t[0]=e=>u.formData.salutation=e),onBlur:t[1]||(t[1]=e=>m.validateField(u.formData.salutation,"salutation")),class:"w-full h-10 px-2 border rounded"},c,544),[[l.bM,u.formData.salutation]]),u.fieldErrors.salutation?((0,r.wg)(),(0,r.iD)("div",p,(0,i.zw)(u.fieldErrors.salutation),1)):(0,r.kq)("",!0)]),"Other"===u.formData.salutation?((0,r.wg)(),(0,r.iD)("div",h,[f,(0,r.wy)((0,r._)("input",{type:"text",id:"otherInfo",onBlur:t[2]||(t[2]=e=>m.validateField(u.formData.otherInfo,"otherInfo")),"onUpdate:modelValue":t[3]||(t[3]=e=>u.formData.otherInfo=e),maxlength:"30",class:"w-full h-10 px-2 border rounded"},null,544),[[l.nr,u.formData.otherInfo]]),u.fieldErrors.otherInfo?((0,r.wg)(),(0,r.iD)("div",y,(0,i.zw)(u.fieldErrors.otherInfo),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.formFields,(e=>((0,r.wg)(),(0,r.j4)(g,{key:e.id,id:e.id,type:e.type,label:e.label,placeholder:e.placeholder,modelValue:u.formData[e.id],"onUpdate:modelValue":t=>u.formData[e.id]=t,validateField:t=>m.validateField(t,e.id),error:u.fieldErrors[e.id],options:e.options},null,8,["id","type","label","placeholder","modelValue","onUpdate:modelValue","validateField","error","options"])))),128)),(0,r.WI)(e.$slots,"default")],32)}const b={class:"mb-4"},w=["for"],v=["id","value"],D=["value"],x=["type","id","value","placeholder"],E={key:2,class:"mt-1 bg-teal-700 text-white text-xs p-2 rounded shadow-lg"},S={key:3,class:"text-red-500"};function k(e,t,a,l,s,o){return(0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("label",{for:a.id,class:"block text-sm mb-1"},(0,i.zw)(a.label)+":",9,w),"select"===a.type?((0,r.wg)(),(0,r.iD)("select",{key:0,id:a.id,onBlur:t[0]||(t[0]=(...e)=>o.handleBlur&&o.handleBlur(...e)),value:a.modelValue,onChange:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value)),class:"w-full h-10 px-2 border rounded"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.options,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.value,value:e.value},(0,i.zw)(e.label),9,D)))),128))],40,v)):((0,r.wg)(),(0,r.iD)("input",{key:1,type:a.type,id:a.id,onBlur:t[2]||(t[2]=(...e)=>o.handleBlur&&o.handleBlur(...e)),onFocus:t[3]||(t[3]=e=>s.showToolTip=!0),value:a.modelValue,onInput:t[4]||(t[4]=t=>e.$emit("update:modelValue",t.target.value)),placeholder:a.placeholder,class:"w-full h-10 px-2 border rounded"},null,40,x)),"password"===a.type&&s.showToolTip?((0,r.wg)(),(0,r.iD)("div",E," Password must have at least 12 characters, 1 upper/lower case letter, 1 number and 1 symbol ")):(0,r.kq)("",!0),a.error?((0,r.wg)(),(0,r.iD)("div",S,(0,i.zw)(a.error),1)):(0,r.kq)("",!0)])}var F={props:{id:String,modelValue:String,label:String,type:String,placeholder:String,validateField:Function,error:String,options:Array},data(){return{showToolTip:!1}},methods:{handleBlur(e){this.showToolTip=!1;const t=e.target.value;this.$emit("update:modelValue",t),this.validateField&&this.validateField(t)}}},_=a(89);const q=(0,_.Z)(F,[["render",k]]);var U=q,V={components:{InputField:U},props:{formFields:{type:Array,required:!0},formSchema:{type:Object,required:!0},initialFormData:{type:Object,required:!0},specialSalutation:{type:Boolean,required:!0}},data(){return{formData:this.initialFormData,fieldErrors:{}}},methods:{validateField(e,t){console.log("Field: "+t+", Value: "+e),this.formSchema.validateAt(t,{...this.formData,[t]:e}).then((()=>{this.fieldErrors[t]=null,"password"===t&&this.validateField(this.formData.password2,"password2")})).catch((e=>{"password2"!==t||this.formData.password2?this.fieldErrors[t]=e.message:this.fieldErrors[t]=null}))},submit(){console.log("FormData: "+JSON.stringify(this.formData)),this.formSchema.validate(this.formData,{abortEarly:!1}).then((()=>{this.$emit("formSubmit",this.formData)})).catch((e=>{e.inner.forEach((e=>{console.log("Validation failed! "+e.message),this.fieldErrors[e.path]=e.message}))}))}}};const z=(0,_.Z)(V,[["render",g]]);var C=z},1869:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var r=a(3396),l=a(7139);const i={class:"min-h-screen bg-gray-100 py-10 px-5 flex flex-col items-center"},s={class:"bg-white p-8 rounded-lg shadow-md w-full max-w-2xl mb-10"},o={key:0},d={class:"text-xl mb-4"},n={key:0},u={class:"text-gray-600 mb-4"},m={class:"text-gray-600 mb-4"},c={class:"text-gray-600 mb-4"},p={class:"text-gray-600 mb-4"},h={class:"text-gray-600 mb-4"},f={class:"text-gray-600 mb-4"},y={key:1};function g(e,t,a,g,b,w){const v=(0,r.up)("NormalHeading"),D=(0,r.up)("CustomButton"),x=(0,r.up)("FormComponent"),E=(0,r.up)("ErrorModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",i,[(0,r._)("div",s,[(0,r.Wm)(v,{text:"Edit User"}),b.user?((0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("h2",d,"Profile Data of: "+(0,l.zw)(b.user.name),1),b.isEditing?((0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)(x,{"initial-form-data":b.editableUserData,"form-fields":b.profileFormFields,"form-schema":b.profileValidationSchema,"special-salutation":!1,onFormSubmit:w.updateProfile},{default:(0,r.w5)((()=>[(0,r.Wm)(D,{type:"submit",customButtonStyle:"mt-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("Save Changes")])),_:1})])),_:1},8,["initial-form-data","form-fields","form-schema","onFormSubmit"]),(0,r.Wm)(D,{onClicked:t[1]||(t[1]=e=>w.cancel()),customButtonStyle:"mt-4 bg-gray-300 text-black p-2 rounded hover:bg-gray-400"},{default:(0,r.w5)((()=>[(0,r.Uk)("Cancel")])),_:1})])):((0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("p",u,"Salutation: "+(0,l.zw)(b.user.salutation),1),(0,r._)("p",m,"Email: "+(0,l.zw)(b.user.email),1),(0,r._)("p",c,"Street: "+(0,l.zw)(b.user.address.street),1),(0,r._)("p",p,"Zip: "+(0,l.zw)(b.user.address.zipcode),1),(0,r._)("p",h,"City: "+(0,l.zw)(b.user.address.city),1),(0,r._)("p",f,"Country: "+(0,l.zw)(b.user.address.country),1),(0,r.Wm)(D,{onClicked:t[0]||(t[0]=e=>w.enableEditing()),customButtonStyle:"mt-4 mr-4 bg-teal-700 text-white p-2 rounded hover:bg-teal-500"},{default:(0,r.w5)((()=>[(0,r.Uk)("Edit Profile")])),_:1})]))])):(0,r.kq)("",!0)])]),(0,r.Wm)(E,{isVisible:b.isErrorModalVisible,errorMessage:b.errorMessage,"onUpdate:isVisible":t[2]||(t[2]=e=>b.isErrorModalVisible=e)},null,8,["isVisible","errorMessage"])],64)}var b=a(9427),w=a(2260),v=a(432),D=a(6685),x=a(4460),E=a(7629),S=a(1076),k={data(){return{user:null,isEditing:!1,isErrorModalVisible:!1,errorMessage:"",store:(0,x.V)(),profileFormFields:[{id:"name",type:"text",label:"Name",placeholder:"Your Name"},{id:"salutation",type:"text",label:"Salutation",placeholder:"Your Salutation"},{id:"address",type:"text",label:"Address",placeholder:"Your Address"},{id:"city",type:"text",label:"City",placeholder:"Your City"},{id:"zip",type:"text",label:"Zip",placeholder:"Your Zip"},{id:"country",type:"select",label:"Country",placeholder:"Your Country",options:[{label:"Austria (AT)",value:"AT"},{label:"Germany (DE)",value:"DE"},{label:"Switzerland (CH)",value:"CH"},{label:"United States (US)",value:"US"},{label:"Canada (CA)",value:"CA"},{label:"United Kingdom (UK)",value:"UK"},{label:"France (FR)",value:"FR"},{label:"Spain (ES)",value:"ES"},{label:"Japan (JP)",value:"JP"}]},{id:"email",type:"text",label:"Email",placeholder:"Your Email"}],profileValidationSchema:(0,E.Ry)().shape({name:(0,E.Z_)().required("Name is required"),salutation:(0,E.Z_)().required("Salutation is required"),address:(0,E.Z_)().required("Address is required"),city:(0,E.Z_)().required("City is required"),zip:(0,E.Z_)().required("ZIP code is required"),country:(0,E.Z_)().required("Country is required"),email:(0,E.Z_)().email("Invalid email format").required("Email is required")}),editableUserData:{}}},components:{NormalHeading:w.Z,CustomButton:b.Z,ErrorModal:v.Z,FormComponent:D.Z},methods:{async updateProfile(e){const t=parseInt(this.$route.params.userId),a={name:e.name,email:e.email,salutation:e.salutation,address:{street:e.address,zipcode:e.zip,city:e.city,country:e.country}};await this.updateUserData(t,a),this.isEditing=!1,await this.getUserData(t)},async updateUserData(e,t){const a=localStorage.getItem("token"),r={headers:{Authorization:`Bearer ${a}`}};try{const a=await S.Z.put("http://localhost:8080/api/v1/user/update/"+e,t,r);if(200===a.status){const e=await a.data;console.log("User updated successfully:",e)}else console.error("Error updating user:",a.status,a.statusText),this.errorMessage="Error updating user: "+a.status+" "+a.statusText,this.isErrorModalVisible=!0}catch(l){console.error("Network error:",l),this.errorMessage=l.message,this.isErrorModalVisible=!0}},async cancel(){this.isEditing=!1,await this.getUserData(parseInt(this.$route.params.userId))},async getUserData(e){try{const t=localStorage.getItem("token"),a={headers:{Authorization:`Bearer ${t}`}},r=await S.Z.get("http://localhost:8080/api/v1/user/"+e,a),l=r.data;this.user={...l,phone:l.phonenumber,zipcode:l.address.zipcode,street:l.address.street,city:l.address.city,country:l.address.country}}catch(t){console.error("Error fetching user:",t)}},enableEditing(){this.isEditing=!0,this.editableUserData={name:this.user.name,salutation:this.user.salutation,email:this.user.email,address:this.user.address.street,city:this.user.address.city,zip:this.user.address.zipcode,country:this.user.address.country}}},async mounted(){await this.getUserData(parseInt(this.$route.params.userId))}},F=a(89);const _=(0,F.Z)(k,[["render",g]]);var q=_}}]);
//# sourceMappingURL=user.041830e7.js.map