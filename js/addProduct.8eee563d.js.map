{"version":3,"file":"js/addProduct.8eee563d.js","mappings":"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","sources":["webpack://frontend/./src/components/pages/AddProductView.vue","webpack://frontend/./src/components/pages/AddProductView.vue?13be"],"sourcesContent":["<template>\r\n    <div class=\"min-h-screen flex flex-col items-center p-5 mt-12\">\r\n\r\n      <!-- Success Alert -->\r\n      <div v-if=\"showAlert\" class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-8\" role=\"alert\">\r\n        <strong class=\"font-bold\">Success!</strong>\r\n        <span class=\"block sm:inline\">Product successfully added!</span>\r\n      </div>\r\n\r\n      <div class=\"bg-white p-8 rounded-lg shadow-md w-96\">\r\n        <NormalHeading text=\"Add Product\" />\r\n  \r\n        <form @submit.prevent=\"addProduct\">\r\n          <div class=\"mb-4\">\r\n            <label for=\"productName\" class=\"block text-lg mb-1 text-gray-600\">Product Name:</label>\r\n            <input v-model=\"form.values.name\" @blur=\"validate('name')\" type=\"text\" id=\"productName\" placeholder=\"Product name\" class=\"w-full h-10 px-2 border rounded\">\r\n            <p class=\"text-red-500\" v-if=\"form.errors.name\">{{ form.errors.name }}</p>\r\n          </div>\r\n          <div class=\"mb-4\">\r\n            <label for=\"productDescription\" class=\"block text-lg mb-1 text-gray-600\">Description:</label>\r\n            <textarea v-model=\"form.values.description\" @blur=\"validate('description')\" id=\"productDescription\" placeholder=\"Product description\" class=\"w-full h-32 px-2 py-2 border rounded\"></textarea>\r\n            <p class=\"text-red-500\" v-if=\"form.errors.description\">{{ form.errors.description }}</p>\r\n          </div>\r\n          <div class=\"mb-4\">\r\n            <label for=\"productPrice\" class=\"block text-lg mb-1 text-gray-600\">Price:</label>\r\n            <input v-model=\"form.values.price\" @blur=\"validate('price')\" type=\"number\" id=\"productPrice\" step=\"0.01\" placeholder=\"Product price\" class=\"w-full h-10 px-2 border rounded\">\r\n            <p class=\"text-red-500\" v-if=\"form.errors.price\">{{ form.errors.price }}</p>\r\n          </div>\r\n          \r\n          <div class=\"mb-4\">\r\n            <label for=\"productImage\" class=\"block text-lg mb-1 text-gray-600\">Product Image:</label>\r\n            <input type=\"file\" ref=\"productImage\" id=\"productImage\" class=\"w-full p-2 border rounded\" @change=\"onImageChange\">\r\n            <p class=\"text-red-500\" v-if=\"form.errors.image\">{{ form.errors.image }}</p>\r\n          </div>\r\n\r\n          <CustomButton type=\"submit\" customButtonStyle=\"w-full bg-teal-700 text-white p-2 rounded hover:bg-teal-500\">Add Product</CustomButton>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <ErrorModal\r\n    :isVisible=\"isErrorModalVisible\"\r\n    :errorMessage=\"errorMessage\"\r\n    @update:isVisible=\"isErrorModalVisible = $event\"\r\n  />\r\n  </template>\r\n  \r\n  <script>\r\n  import CustomButton from '@/components/atoms/Button.vue';  \r\n  import NormalHeading from \"@/components/atoms/NormalHeading.vue\";\r\n  import ErrorModal from \"@/components/atoms/ErrorModal.vue\";\r\n  import { useCompleteStore } from '@/store/store';\r\n  import { object, string, number } from \"yup\";\r\n\r\n  const productSchema = object().shape({\r\n    name: string().required(\"Product name is required\"),\r\n    description: string().required(\"Product description is required\"),\r\n    price: number().typeError(\"Price must be a number\").min(0, \"Price must be a positive number\").required(\"Price is required\"),\r\n    image: string().required(\"Image is required\"),\r\n  });\r\n\r\n  export default {\r\n    name: 'AdminAddProduct',\r\n    components: {\r\n      NormalHeading,\r\n      CustomButton,\r\n      ErrorModal\r\n    },\r\n    data() {\r\n      return {\r\n        form: {\r\n          values: {\r\n            name: '',\r\n            description: '',\r\n            price: 0,\r\n            image: null\r\n          },\r\n          errors: {\r\n            name: '',\r\n            description: '',\r\n            price: '',\r\n            image: ''\r\n          }\r\n        },\r\n        showAlert: false,\r\n        isErrorModalVisible: false,\r\n        errorMessage: \"\",\r\n        store: useCompleteStore(),\r\n      }\r\n    },\r\n    methods: {\r\n      async addProduct() {\r\n        productSchema.validate(this.form.values, { abortEarly: false })\r\n        .then(async () => {\r\n          // Clear previous errors\r\n          this.form.errors = { name: '', description: '', price: '', image: '' };\r\n\r\n          const payload = {\r\n            id: this.form.values.id,\r\n            name: this.form.values.name,\r\n            price: this.form.values.price,\r\n            description: this.form.values.description,\r\n            image: this.form.values.image\r\n          };\r\n          const success = await this.store.addProduct(payload);\r\n          if(success) {\r\n            this.showAlert = true;\r\n            setTimeout(this.resetForm, 2000);\r\n          } else {\r\n            this.errorMessage = \"Error adding product!\";\r\n            this.isErrorModalVisible = true;\r\n          }\r\n        }).catch((err) => {\r\n          console.log(err);\r\n          this.errorMessage = \"Error adding product: \" + err;\r\n          this.isErrorModalVisible = true;\r\n        });\r\n    },\r\n    validate(field) {\r\n      productSchema\r\n        .validateAt(field, this.form.values)\r\n        .then(() => {\r\n          this.form.errors[field] = \"\";\r\n        })\r\n        .catch((err) => {\r\n          this.form.errors[field] = err.message;\r\n        });\r\n    },\r\n    resetForm() {\r\n        this.form.values = { name: '', description: '', price: 0, image: null };\r\n        this.form.errors = { name: '', description: '', price: '', image: '' };\r\n        this.showAlert = false;\r\n        if (this.$refs.productImage) {\r\n          this.$refs.productImage.value = '';\r\n        }\r\n      },\r\n      onImageChange(e) {\r\n        console.log(\"Image change: \" + e);\r\n        //const file = e.target.files[0];\r\n        //wait for backend to finish file upload\r\n        this.form.values.image = \"blue1.webp\"; //default\r\n        \r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  ","import { render } from \"./AddProductView.vue?vue&type=template&id=003799eb\"\nimport script from \"./AddProductView.vue?vue&type=script&lang=js\"\nexport * from \"./AddProductView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","role","_createElementVNode","_hoisted_3","_hoisted_4","for","_hoisted_1","$data","showAlert","_createElementBlock","_hoisted_2","_hoisted_5","_hoisted_6","_createVNode","_component_NormalHeading","text","onSubmit","_cache","_withModifiers","args","$options","addProduct","_hoisted_7","_hoisted_8","form","values","name","$event","onBlur","validate","type","id","placeholder","errors","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","description","_hoisted_12","_hoisted_13","_hoisted_14","price","step","_hoisted_15","_hoisted_16","_hoisted_17","ref","onChange","onImageChange","image","_hoisted_18","_component_CustomButton","customButtonStyle","_component_ErrorModal","isVisible","isErrorModalVisible","errorMessage","productSchema","object","shape","string","required","number","typeError","min","components","NormalHeading","CustomButton","ErrorModal","data","store","useCompleteStore","methods","this","abortEarly","then","async","payload","success","setTimeout","resetForm","catch","err","console","log","field","validateAt","message","$refs","productImage","value","e","__exports__","render"],"sourceRoot":""}