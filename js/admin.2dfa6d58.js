"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[884],{8038:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var s=a(6768),n=a(5130),l=a(4232);const o=e=>((0,s.Qi)("data-v-3004ece4"),e=e(),(0,s.jt)(),e),i={class:"admin-container"},r=o(()=>(0,s.Lk)("h1",null,"ðŸŽ­ Contest Admin",-1)),c={class:"card black"},u=o(()=>(0,s.Lk)("label",null,"Costume name",-1)),d=o(()=>(0,s.Lk)("label",null,"Category",-1)),m=o(()=>(0,s.Lk)("option",{value:1},"Category 1",-1)),g=o(()=>(0,s.Lk)("option",{value:2},"Category 2",-1)),k=o(()=>(0,s.Lk)("option",{value:3},"Category 3",-1)),v=[m,g,k],C=o(()=>(0,s.Lk)("label",null,"Image",-1)),h=["src"],L=["disabled"],p={class:"card danger"},y={class:"card"},w={class:"card"},b=o(()=>(0,s.Lk)("h2",null,"Preview",-1)),f={class:"card leaderboard"},E=o(()=>(0,s.Lk)("h2",null,"Ranking",-1)),F={key:0,class:"empty"},X={key:1,class:"ranking"},_={class:"rank"},I=["src"],R={class:"info"},A={class:"name"},K={class:"votes"};function U(e,t,a,o,m,g){return(0,s.uX)(),(0,s.CE)("div",i,[r,(0,s.Lk)("div",c,[u,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.name=e),placeholder:"e.g. Pirate"},null,512),[[n.Jo,m.name]]),d,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.category=e)},v,512),[[n.u1,m.category]]),C,(0,s.Lk)("input",{type:"file",accept:"image/*",onChange:t[2]||(t[2]=(...e)=>g.onFileChange&&g.onFileChange(...e))},null,32),m.preview?((0,s.uX)(),(0,s.CE)("img",{key:0,src:m.preview,class:"preview"},null,8,h)):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"primary",disabled:!g.canSubmit,onClick:t[3]||(t[3]=(...e)=>g.addCostume&&g.addCostume(...e))}," Add costume ",8,L)]),(0,s.Lk)("div",p,[(0,s.Lk)("button",{class:"danger-btn",onClick:t[4]||(t[4]=(...e)=>g.conclude&&g.conclude(...e))}," âŒ Conclude contest ")]),(0,s.Lk)("div",y,[(0,s.Lk)("button",{class:"reset-btn",onClick:t[5]||(t[5]=(...e)=>g.resetContest&&g.resetContest(...e))}," ðŸ”„ Reset contest votes ")]),(0,s.Lk)("div",w,[b,((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)([1,2,3],e=>(0,s.Lk)("div",{key:e,class:"preview-category"},[(0,s.Lk)("h3",null,"Category "+(0,l.v_)(e),1),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.store.getCostumesByCategory(e),e=>((0,s.uX)(),(0,s.CE)("li",{key:e.id},(0,l.v_)(e.name)+" ("+(0,l.v_)(e.votes)+" votes) ",1))),128))])])),64))]),(0,s.Lk)("div",f,[E,((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)([1,2,3],e=>(0,s.Lk)("div",{key:e,class:"category-card"},[(0,s.Lk)("h3",null,"Category "+(0,l.v_)(e),1),0===g.results(e).length?((0,s.uX)(),(0,s.CE)("div",F," No entries ")):((0,s.uX)(),(0,s.CE)("ol",X,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.results(e),(e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:e.id,class:"rank-item"},[(0,s.Lk)("span",_,(0,l.v_)(g.medal(t)),1),(0,s.Lk)("img",{src:e.image,class:"thumb",alt:"Costume"},null,8,I),(0,s.Lk)("div",R,[(0,s.Lk)("div",A,(0,l.v_)(e.name),1),(0,s.Lk)("div",K,(0,l.v_)(e.votes)+" votes",1)])]))),128))]))])),64))])])}var S=a(7683),V={name:"AdminView",data(){return{name:"",category:1,image:null,preview:null}},computed:{store(){return(0,S.G)()},canSubmit(){return this.name&&this.image&&!this.store.isContestConcluded}},mounted(){this.store.loadContestFromFirebase()},methods:{onFileChange(e){const t=e.target.files[0];if(!t)return;const a=new Image,s=new FileReader;s.onload=e=>{a.src=e.target.result},a.onload=()=>{const e=800,t=e/a.width,s=document.createElement("canvas");s.width=e,s.height=a.height*t;const n=s.getContext("2d");n.drawImage(a,0,0,s.width,s.height);const l=s.toDataURL("image/jpeg",.7);this.image=l,this.preview=l},s.readAsDataURL(t)},async addCostume(){this.canSubmit&&(await this.store.addCostume({category:this.category,name:this.name,image:this.image}),this.name="",this.category=1,this.image=null,this.preview=null)},async conclude(){confirm("This will stop all voting. Continue?")&&await this.store.concludeContest()},async resetContest(){confirm("Reset all votes and allow voting again?")&&await this.store.resetContest()},results(e){return this.store.getRankedResults(e)},medal(e){return 0===e?"ðŸ¥‡":1===e?"ðŸ¥ˆ":2===e?"ðŸ¥‰":`#${e+1}`}}},j=a(1241);const D=(0,j.A)(V,[["render",U],["__scopeId","data-v-3004ece4"]]);var P=D}}]);
//# sourceMappingURL=admin.2dfa6d58.js.map