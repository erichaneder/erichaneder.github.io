"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[884],{4720:function(e,t,s){s.r(t),s.d(t,{default:function(){return Y}});var a=s(6768),l=s(5130),o=s(4232);const n=e=>((0,a.Qi)("data-v-2ee4f1d6"),e=e(),(0,a.jt)(),e),i={class:"admin-container"},r=n(()=>(0,a.Lk)("h1",null,"ğŸ­ Contest Admin",-1)),u={class:"card black"},c=n(()=>(0,a.Lk)("label",null,"Costume name",-1)),d=n(()=>(0,a.Lk)("label",null,"Category",-1)),m=n(()=>(0,a.Lk)("option",{value:1},"Peinlichstes KostÃ¼m",-1)),k=n(()=>(0,a.Lk)("option",{value:2},"Bestes GruppenkostÃ¼m",-1)),v=n(()=>(0,a.Lk)("option",{value:3},"Kreativstes KostÃ¼m",-1)),g=[m,k,v],C=n(()=>(0,a.Lk)("label",null,"Image",-1)),L=["src"],h=["disabled"],y={class:"card danger"},p={class:"card"},b={class:"card vote-card"},w={class:"vote-summary"},f={class:"vote-total"},E=n(()=>(0,a.Lk)("div",{class:"vote-label"},"Total votes cast",-1)),X={class:"vote-value"},_={class:"vote-breakdown"},F={class:"vote-cat"},K={class:"vote-count"},I={class:"card"},A=n(()=>(0,a.Lk)("h2",null,"Preview",-1)),R={class:"card leaderboard"},V=n(()=>(0,a.Lk)("h2",null,"Ranking",-1)),B={key:0,class:"empty"},P={key:1,class:"ranking"},U={class:"rank"},G=["src"],N={class:"info"},S={class:"name"},j={class:"votes"},D={class:"card all-costumes"},Q=n(()=>(0,a.Lk)("h2",null,"All Costumes",-1)),T={key:0,class:"empty"},$={key:1,class:"costume-table"},x=n(()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Image"),(0,a.Lk)("th",null,"Name"),(0,a.Lk)("th",null,"Category"),(0,a.Lk)("th",null,"Votes"),(0,a.Lk)("th",null,"Action")])],-1)),J=["src"],M=["onClick"];function q(e,t,s,n,m,k){return(0,a.uX)(),(0,a.CE)("div",i,[r,(0,a.Lk)("div",u,[c,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.name=e),placeholder:"e.g. Pirate"},null,512),[[l.Jo,m.name]]),d,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>m.category=e)},g,512),[[l.u1,m.category]]),C,(0,a.Lk)("input",{type:"file",accept:"image/*",onChange:t[2]||(t[2]=(...e)=>k.onFileChange&&k.onFileChange(...e))},null,32),m.preview?((0,a.uX)(),(0,a.CE)("img",{key:0,src:m.preview,class:"preview"},null,8,L)):(0,a.Q3)("",!0),(0,a.Lk)("button",{class:"primary",disabled:!k.canSubmit,onClick:t[3]||(t[3]=(...e)=>k.addCostume&&k.addCostume(...e))}," Add costume ",8,h)]),(0,a.Lk)("div",y,[(0,a.Lk)("button",{class:"danger-btn",onClick:t[4]||(t[4]=(...e)=>k.conclude&&k.conclude(...e))}," âŒ Conclude contest ")]),(0,a.Lk)("div",p,[(0,a.Lk)("button",{class:"reset-btn",onClick:t[5]||(t[5]=(...e)=>k.resetContest&&k.resetContest(...e))}," ğŸ”„ Reset contest votes ")]),(0,a.Lk)("div",b,[(0,a.Lk)("div",w,[(0,a.Lk)("div",f,[E,(0,a.Lk)("div",X,(0,o.v_)(k.totalVotesAll),1)]),(0,a.Lk)("div",_,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)([1,2,3],e=>(0,a.Lk)("div",{key:e,class:"vote-row"},[(0,a.Lk)("span",F,(0,o.v_)(k.categoryLabel(e)),1),(0,a.Lk)("span",K,(0,o.v_)(k.totalVotesByCategory(e)),1)])),64))])])]),(0,a.Lk)("div",I,[A,((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)([1,2,3],e=>(0,a.Lk)("div",{key:e,class:"preview-category"},[(0,a.Lk)("h3",null,(0,o.v_)(k.categoryLabel(e)),1),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.store.getCostumesByCategory(e),e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,o.v_)(e.name)+" ("+(0,o.v_)(e.votes)+" votes) ",1))),128))])])),64))]),(0,a.Lk)("div",R,[V,((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)([1,2,3],e=>(0,a.Lk)("div",{key:e,class:"category-card"},[(0,a.Lk)("h3",null,(0,o.v_)(k.categoryLabel(e)),1),0===k.results(e).length?((0,a.uX)(),(0,a.CE)("div",B," No entries ")):((0,a.uX)(),(0,a.CE)("ol",P,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.results(e),(e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:e.id,class:"rank-item"},[(0,a.Lk)("span",U,(0,o.v_)(k.medal(t)),1),(0,a.Lk)("img",{src:e.image,class:"thumb",alt:"Costume"},null,8,G),(0,a.Lk)("div",N,[(0,a.Lk)("div",S,(0,o.v_)(e.name),1),(0,a.Lk)("div",j,(0,o.v_)(e.votes)+" votes",1)])]))),128))]))])),64))]),(0,a.Lk)("div",D,[Q,0===k.allCostumes.length?((0,a.uX)(),(0,a.CE)("div",T," No entries ")):((0,a.uX)(),(0,a.CE)("table",$,[x,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.allCostumes,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:e.image,alt:"Costume",class:"table-thumb"},null,8,J)]),(0,a.Lk)("td",null,(0,o.v_)(e.name),1),(0,a.Lk)("td",null,(0,o.v_)(k.categoryLabel(e.category)),1),(0,a.Lk)("td",null,(0,o.v_)(e.votes),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{class:"delete-btn",onClick:t=>k.removeCostume(e.id)}," âŒ ",8,M)])]))),128))])]))])])}s(3725),s(1339),s(9471);var z=s(7683),H={name:"AdminView",data(){return{name:"",category:1,image:null,preview:null}},computed:{store(){return(0,z.G)()},canSubmit(){return this.name&&this.image&&!this.store.isContestConcluded},allCostumes(){return[1,2,3].flatMap(e=>this.store.getCostumesByCategory(e).map(t=>({...t,category:e})))},totalVotesAll(){return[1,2,3].reduce((e,t)=>e+this.totalVotesByCategory(t),0)}},mounted(){this.store.loadContestFromFirebase()},methods:{onFileChange(e){const t=e.target.files[0];if(!t)return;const s=new Image,a=new FileReader;a.onload=e=>{s.src=e.target.result},s.onload=()=>{const e=800,t=e/s.width,a=document.createElement("canvas");a.width=e,a.height=s.height*t;const l=a.getContext("2d");l.drawImage(s,0,0,a.width,a.height);const o=a.toDataURL("image/jpeg",.7);this.image=o,this.preview=o},a.readAsDataURL(t)},async addCostume(){this.canSubmit&&(await this.store.addCostume({category:this.category,name:this.name,image:this.image}),this.name="",this.category=1,this.image=null,this.preview=null)},async conclude(){confirm("This will stop all voting. Continue?")&&await this.store.concludeContest()},async resetContest(){confirm("Reset all votes and allow voting again?")&&await this.store.resetContest()},async removeCostume(e){confirm("Remove this costume?")&&await this.store.deleteCostume(e)},results(e){return this.store.getRankedResults(e)},categoryLabel(e){return 1===e?"Peinlichstes KostÃ¼m":2===e?"Bestes GruppenkostÃ¼m":3===e?"Kreativstes KostÃ¼m":`Category ${e}`},totalVotesByCategory(e){return this.store.getCostumesByCategory(e).reduce((e,t)=>e+(t.votes||0),0)},medal(e){return 0===e?"ğŸ¥‡":1===e?"ğŸ¥ˆ":2===e?"ğŸ¥‰":`#${e+1}`}}},O=s(1241);const W=(0,O.A)(H,[["render",q],["__scopeId","data-v-2ee4f1d6"]]);var Y=W}}]);
//# sourceMappingURL=admin.70544fe6.js.map